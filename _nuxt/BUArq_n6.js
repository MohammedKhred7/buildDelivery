import V from"./CX54Bdhp.js";import{_ as z,s as E,r as u,j as L,O as M,k as O,K as T,c as f,a as o,b as r,d as q,u as e,w as v,q as H,o as g,i as K,g as h,n as J,v as Q,I as W}from"./BkuztzW3.js";import X from"./DvIgaX8y.js";import b from"./BjT7j5UJ.js";import{s as y}from"./CMqRTpdN.js";import Y from"./w4NgcY4v.js";import"./CbERDNuN.js";import{u as Z}from"./hv33ZudW.js";import{u as P}from"./DQwX8KV9.js";import"./CzCEWqsM.js";import"./CUecD_Xo.js";import"./4Hd6Th6S.js";import"./CrYi7lgo.js";import"./ofHV_75J.js";import"./BNq-RGet.js";import"./DVUX4ze4.js";import"./DqC-NLfo.js";import"./DFix_ZeX.js";import"./FwLbxTn1.js";import"./B_DS0GlR.js";import"./CzKfs_1d.js";import"./B17QGqlf.js";import"./-g5_Z9ii.js";import"./CSZ1fRNq.js";import"./Bld9HrtE.js";import"./DIZiabgV.js";import"./CsfC7ZI_.js";import"./BIBgpQqU.js";import"./DF74AHmj.js";import"./YnY0skNO.js";const ee={class:"py-6 pl-6 pr-6"},le={class:"icon-category"},ae=["src"],se={class:"p-fluid p-0"},te={class:"mb-4"},ie={key:0,class:"flex justify-content-center"},oe=["src"],ne={key:1,class:"relative text-white mr-4",style:{top:"50px",left:"9px"}},re={class:"flex justify-content-center gap-2"},ce={__name:"slider",setup(ue){P({title:"إدارة شرائح الصفحة الرئيسية"});const{errorMessage:p,success:w}=E(),l=Z(),x=u(null),I=L(),{file:n,urlImage:k}=M(I);O(async()=>{l.GetAllSlides()});const $=u(!1),A=u(null),d=u(null),c=u(!1),s=u({id:1,images:[]});function B(){s.value={id:null,images:[]},n.value=null,d.value=null,c.value=!0}async function R(a){s.value.id=a,d.value=a,n.value=null,c.value=!0}function D(a){n.value=a.files[0]}function F(){n.value=null}function G(){x.value.choose()}const m=u(!1);async function N(){m.value=!0;try{if(d.value===null){n.value&&(s.value.images=l==null?void 0:l.allSlides.images,s.value.images.push(42));const a={...s.value};await l.updateImageSlider(a),l.sucsses?(w("تم إضافة الصورة  بنجاح"),await l.GetAllSlides()):p("مشكلة في الاتصال")}else{if(n.value){const t=await I.upladFiles(n.value);if(t)s.value.images=l==null?void 0:l.allSlides.images,s.value.images.push(t);else{p("خطأ في رفع الملف"),m.value=!1;return}}const a={...s.value};await l.updateImageSlider(a),l.sucsses?(w("تم تعديل الصورة بنجاح"),await l.GetAllSlides()):p("مشكلة في الاتصال")}c.value=!1}catch(a){console.log(a),p("حدث خطأ غير متوقع")}finally{m.value=!1}}return T($,a=>{a===!1&&(d.value=null,A.value=null)}),(a,t)=>{var S;const U=V;return g(),f("div",ee,[t[3]||(t[3]=o("div",{class:"main-title mb-4"},[o("h1",{class:"pb-3 pr-0"},[q(" إدارة شرائح الصفحة الرئيسية "),o("i",{class:"pi pi-image pr-3"})])],-1)),o("div",null,[r(e(y),{label:"إضافة شريحة",class:"mb-3",severity:"success",onClick:B},null,8,["onClick"])]),r(e(X),{value:(S=e(l))==null?void 0:S.allSlides.images,rows:5,rowsPerPageOptions:[5,10,20,50],paginator:!0,class:"p-datatable-gridlines"},{default:v(()=>[r(e(b),{style:{"text-align":"start"},field:"id",header:"ID",sortable:""}),r(e(b),{field:"images",header:"الصورة",style:{"justify-content":"center",display:"flex"}},{body:v(i=>[o("div",le,[o("img",{src:e(k)+(i==null?void 0:i.data),alt:"icon",class:"w-full h-full",style:{"border-radius":"50px"}},null,8,ae)])]),_:1}),r(e(b),{style:{"text-align":"start"},header:"إجراء"},{body:v(i=>[r(e(y),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"gap-2 ml-2",onClick:_=>R(i==null?void 0:i.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),r(e(Y),{visible:e(c),"onUpdate:visible":t[1]||(t[1]=i=>H(c)?c.value=i:null),header:"تعديل صورة",modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:v(()=>{var i,_,C,j;return[o("div",se,[o("div",te,[K(r(U,{ref_key:"uploader",ref:x,class:J(e(n)?"d-none":"justify-content-center "),name:"avatar",customUpload:"",accept:"image/*",maxFileSize:"1000000",auto:!1,multiple:!1,chooseLabel:"انقر لتحميل صورة",uploadLabel:"انقر لتحميل صورة",showUploadButton:!1,showCancelButton:!1,onSelect:D,onRemove:F},null,8,["class"]),[[Q,e(n)]]),e(n)?h("",!0):(g(),f("div",ie,[o("div",{class:"profileImage p-1",onClick:G},[(i=e(s))!=null&&i.id?(g(),f("img",{key:0,src:e(k)+((_=e(s))==null?void 0:_.id),alt:"انقر لتحميل صورة",style:{"border-radius":"50%",width:"100%",height:"100%","object-fit":"cover"}},null,8,oe)):h("",!0),(C=e(s))!=null&&C.id?h("",!0):(g(),f("span",ne,"انقر لتحميل صورة ")),o("span",{class:"iconCamera",style:W({top:(j=e(s))!=null&&j.id?"-44px":"50px"})},t[2]||(t[2]=[o("i",{class:"pi pi-camera"},null,-1)]),4)])]))]),o("div",re,[r(e(y),{label:e(d)?"تحديث":"حفظ",icon:"pi pi-check pl-2",class:"w-50",severity:"success",onClick:N,loading:e(m)},null,8,["label","loading"]),r(e(y),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:t[0]||(t[0]=de=>c.value=!1)})])])]}),_:1},8,["visible"])])}}},Oe=z(ce,[["__scopeId","data-v-01eff213"]]);export{Oe as default};
