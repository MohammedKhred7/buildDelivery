import{_ as oe,a as ne}from"./CYuOoH-s.js";import re from"./DTbU21_y.js";import ae from"./CbERDNuN.js";import ie from"./C9wKwV-i.js";import de from"./zG8NBy0r.js";import ue from"./BBG2lTla.js";import ve from"./DqC-NLfo.js";import{_ as pe}from"./B40IkNUo.js";import{_ as ce}from"./DUsO2gvz.js";import fe from"./w4NgcY4v.js";import me from"./BIBgpQqU.js";import be from"./CMIMQ81a.js";import{_ as Y,j as te,m as K,r as y,c as r,o as n,a as t,b as a,f as W,g as d,t as C,u as s,F as N,h as G,w as O,d as ge,q as b,J as ye,K as we,k as xe,E as Se}from"./BkuztzW3.js";import{u as le}from"./5-xz43tw.js";import{_ as ke}from"./NpRyEfNj.js";import{_ as Oe,a as Ce}from"./DKRBsJi-.js";import{u as $e}from"./DQwX8KV9.js";import"./BKFrZTt3.js";import"./BBudGADW.js";import"./B_DS0GlR.js";import"./CX54Bdhp.js";import"./CMqRTpdN.js";import"./CrYi7lgo.js";import"./ofHV_75J.js";import"./CzCEWqsM.js";import"./CUecD_Xo.js";import"./4Hd6Th6S.js";import"./DWnGJ0b-.js";import"./Bl-IlMHc.js";import"./3yg00-5k.js";import"./DIZiabgV.js";import"./DFix_ZeX.js";import"./FwLbxTn1.js";import"./CzKfs_1d.js";const De=""+new URL("searchImg.CKSdbY9U.svg",import.meta.url).href,_e={class:"card p-3 my-3"},Ve={class:"font-bold orderStatus"},Ue={class:"flex row gap-2 order-info"},Ie=["src"],je={class:"text-center"},Re={class:"flex justify-content-between p-2"},Le={class:"order-price"},Pe={class:"order-details my-3 p-3"},Me={class:"product-amount flex align-items-center justify-content-between"},Te={class:"font-bold"},Ne={class:"product-amount flex align-items-center justify-content-between"},Be={class:"font-bold"},Ge={class:"order-btns flex gap-2"},Fe={key:0,class:"add-product-btn w-100"},qe={key:1,class:"add-product-btn w-100"},ze={key:4,class:"add-product-btn w-100"},Ae={key:0},Ee={key:1,class:"spinner"},Je={class:"flex justify-end gap-2"},He={class:"text-right"},Ke={class:"flex-column flex-wrap justify-center gap-3 py-2 mb-3"},We={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},Qe={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},Ze={key:0,class:"w-full"},he={class:"flex justify-end gap-2"},et={key:0},tt={key:1,class:"spinner"},lt={class:"text-right"},st={class:"flex-column flex-wrap justify-center gap-3 py-2 mb-3"},ot={class:"flex items-center gap-2"},nt={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},at={class:"flex items-center gap-2"},it={key:0,class:"w-full"},dt={class:"flex justify-end gap-2"},ut={key:0},vt={key:1,class:"spinner"},pt={class:"flex justify-end gap-2"},ct={class:"flex justify-end gap-2"},ft={key:0},mt={key:1,class:"spinner"},bt={class:"flex-column text-right pb-3"},gt={class:"flex justify-end gap-2"},yt={key:0},wt={key:1,class:"spinner"},xt={class:"flex justify-end gap-2"},St={key:0},kt={key:1,class:"spinner"},Ot={class:"flex justify-end gap-2"},Ct={key:0},$t={key:1,class:"spinner"},Dt={class:"flex justify-end gap-2"},_t={key:0},Vt={key:1,class:"spinner"},Ut={__name:"orderCardStatus",props:{order:{type:Object,required:!0}},setup(u){const o=le(),w=u,$=te(),x=localStorage.getItem("user");$.ProfileUser=JSON.parse(x);const m=$.ProfileUser.role,D={0:"طلب جديد",1:"جاري البحث عن سائق",2:"قيد التنفيذ",3:"قيد التوصيل",4:"بانتظار التسليم",5:"تم إلغاء الطلب",6:"تم التسليم"},j=K(()=>D[w.order.orderStatus]||w.order.orderStatus),p=y([]),V=y(null),U=y(!1),k=y(!1),R=y(!1),g=y(!1),v=y(!1),S=y(!1),L=y(!1),P=y(!1),M=y(!1);async function F(i,e){i==="Driver"?S.value=!0:i==="ServiceProvider"&&(await o.ChnageOrderStatus(e,1),o.isSuccess&&(U.value=!0))}async function q(i,e){i==="ServiceProvider"&&(await o.ChnageOrderStatus(e,5),o.isSuccess&&console.log(o.isSuccess))}async function z(i){if(await o.ChnageOrderStatus(i,5),o.isSuccess)k.value=!1;else return null}async function A(i){await o.ChnageOrderStatus(i,4),o.isSuccess&&(v.value=!1,o.GetOrders("","","","",$.ProfileUser.id,"",m))}async function E(i){await o.ChnageOrderStatus(i,2),o.isSuccess&&(S.value=!1)}async function B(i){await o.ChnageOrderStatus(i,6),o.isSuccess&&(L.value=!1)}async function J(i){await o.ChnageOrderStatus(i,6),o.isSuccess&&(M.value=!1)}async function H(i){await o.ChnageOrderStatus(i,3),o.isSuccess&&(P.value=!1,o.GetOrders("","","","",$.ProfileUser.id,"",m))}return(i,e)=>{var X,Z,h;const se=pe,_=ce,I=fe,T=me,Q=be;return n(),r(N,null,[t("div",_e,[t("h1",Ve,C(s(j)),1),t("p",null,"رقم الطلب # "+C((Z=(X=u.order.orderDetails)==null?void 0:X[0])==null?void 0:Z.orderID),1),t("div",Ue,[(n(!0),r(N,null,G(u.order.orderDetails,(l,f)=>{var c,ee;return n(),r("div",{key:f,class:"order-cards p-2 flex-column mb-3"},[(ee=(c=l.offer)==null?void 0:c.images)!=null&&ee.length?(n(),r("img",{key:0,src:s(o).urlImage+l.offer.images[0],alt:""},null,8,Ie)):d("",!0),t("h3",je,C(l.productName),1),t("div",Re,[t("span",Le,C(l.unitPrice)+" ر.ي",1),t("span",null,C(l.quantity)+"x",1)])])}),128))]),t("div",Pe,[e[45]||(e[45]=t("h1",{class:"font-bold"},"ملخص الطلب",-1)),t("div",Me,[e[43]||(e[43]=t("p",null,"عدد المنتجات",-1)),t("h1",Te,C((h=u.order.orderDetails)==null?void 0:h.length),1)]),t("div",Ne,[e[44]||(e[44]=t("p",null,"الاجمالي",-1)),t("h1",Be,C(u.order.totalAmount)+" ر.ي",1)])]),t("div",Ge,[u.order.orderReadyBtn?(n(),r("button",Fe,"الطلب جاهز")):d("",!0),u.order.confirmDeliveredBtn?(n(),r("button",qe,"تاكيد التسليم")):d("",!0),a(se,{class:"edit-product-btn w-100 text-center",to:{path:`/orders/${u.order.id}`,query:{order:encodeURIComponent(JSON.stringify(u.order))}}},{default:O(()=>e[46]||(e[46]=[ge(" عرض تفاصيل الطلب ")])),_:1,__:[46]},8,["to"]),u.order.orderStatus==4&&s(m)==="Client"?(n(),r("button",{key:2,onClick:e[0]||(e[0]=l=>M.value=!0),class:"accept-order-btn w-100"}," تأكيد الأستلام ")):d("",!0),(u.order.orderStatus==0||u.order.orderStatus==1)&&s(m)==="Client"?(n(),r("button",{key:3,onClick:e[1]||(e[1]=l=>k.value=!0),class:"reject-order-btn w-100"}," إلغاء الطلب ")):d("",!0),(u.order.orderStatus==2||u.order.orderStatus==3)&&s(m)=="Client"?(n(),r("button",ze," تتبع الطلب ")):d("",!0),u.order.orderStatus==4&&s(m)==="Driver"?(n(),r("button",{key:5,onClick:e[2]||(e[2]=l=>L.value=!0),class:"accept-order-btn w-100"}," إنهاء التسليم ")):d("",!0),u.order.orderStatus==3&&s(m)=="Driver"?(n(),r("button",{key:6,onClick:e[3]||(e[3]=l=>v.value=!0),class:"add-product-btn w-100"}," تم الوصول ")):d("",!0),u.order.orderStatus==2&&s(m)=="Driver"?(n(),r("button",{key:7,onClick:e[4]||(e[4]=l=>P.value=!0),class:"order-ready-btn w-100"}," الطلب جاهز ")):d("",!0),u.order.orderStatus==0&&s(m)==="ServiceProvider"||u.order.orderStatus==0&&s(m)==="Driver"?(n(),r("button",{key:8,class:"accept-order-btn w-100",onClick:e[5]||(e[5]=l=>{var f,c;return F(s(m),(c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",Ae,"قبول")),s(o).changeOrderStatueLoading?(n(),r("span",Ee)):d("",!0)])):d("",!0),u.order.orderStatus==0&&s(m)==="ServiceProvider"?(n(),r("button",{key:9,onClick:e[6]||(e[6]=l=>R.value=!0),class:"reject-order-btn w-100"}," رفض ")):d("",!0)])]),a(I,{class:"text-center FindDeliveryModel",closable:!1,visible:s(U),"onUpdate:visible":e[8]||(e[8]=l=>b(U)?U.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[47]||(e[47]=t("div",null,[t("img",{src:De,alt:""})],-1)),e[48]||(e[48]=t("h1",{class:"text-xl font-bold"},"جاري البحث عن ديلفري",-1)),e[49]||(e[49]=t("p",null,"نحن نعمل على إيجاد أقرب سائق لتوصيل الطلب في أسرع وقت ممكن. يمكنك متابعة حالة الطلب لحظة بلحظة من خلال صفحة التتبع، وسيتم إشعارك فور قبول السائق للطلب وانطلاقه إليك.",-1)),t("div",Je,[a(_,{class:"follow-order-btn",type:"button",label:"تتبع الطلب",onClick:e[7]||(e[7]=l=>U.value=!1)})])]),_:1,__:[47,48,49]},8,["visible"]),a(I,{class:"text-center salesmanRejectOrderModel",closable:!1,visible:s(R),"onUpdate:visible":e[16]||(e[16]=l=>b(R)?R.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[55]||(e[55]=t("h1",{class:"text-xl font-bold"},"سبب رفض الطلب",-1)),e[56]||(e[56]=t("p",null,"برفض الطلب، سيتم إشعار المشتري ولن يتم تنفيذ الطلب. يرجى التأكد قبل المتابعة.",-1)),t("div",He,[e[54]||(e[54]=t("p",{class:"font-bold",style:{color:"#000"}},"يرجى اختيار سبب رفض الطلب*",-1)),t("div",Ke,[t("div",We,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[9]||(e[9]=l=>b(p)?p.value=l:null),inputId:"ingredient1",name:"rejectReason",value:"val1"},null,8,["modelValue"]),e[50]||(e[50]=t("label",{for:"ingredient1"}," المنتج غير متوفر حالياً ",-1))]),t("div",Ye,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[10]||(e[10]=l=>b(p)?p.value=l:null),inputId:"ingredient2",name:"rejectReason",value:"val2"},null,8,["modelValue"]),e[51]||(e[51]=t("label",{for:"ingredient2"}," لا يمكن التوصيل إلى موقع المشتري ",-1))]),t("div",Qe,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[11]||(e[11]=l=>b(p)?p.value=l:null),inputId:"ingredient3",name:"rejectReason",value:"val3"},null,8,["modelValue"]),e[52]||(e[52]=t("label",{for:"ingredient3"}," خطأ في تفاصيل الطلب ",-1))]),t("div",Xe,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[12]||(e[12]=l=>b(p)?p.value=l:null),inputId:"ingredient4",name:"rejectReason",value:"val4"},null,8,["modelValue"]),e[53]||(e[53]=t("label",{for:"ingredient4"}," أخرى (يرجى التوضيح) ",-1))]),s(p).includes("val4")?(n(),r("div",Ze,[a(Q,{id:"rejectReasonNote",autoResize:"",modelValue:s(V),"onUpdate:modelValue":e[13]||(e[13]=l=>b(V)?V.value=l:null),rows:"4",cols:"30",class:"w-full p-2 border rounded",placeholder:"يرجى كتابة سبب الرفض هنا..."},null,8,["modelValue"])])):d("",!0)])]),t("div",he,[t("button",{class:"reject-order-btn w-100",onClick:e[14]||(e[14]=l=>{var f,c;return q(s(m),(c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",et,"تأكيد الرفض")),s(o).changeOrderStatueLoading?(n(),r("span",tt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[15]||(e[15]=l=>R.value=!1)})])]),_:1,__:[55,56]},8,["visible"]),a(I,{class:"text-center rejectOrderModel",closable:!1,visible:s(k),"onUpdate:visible":e[24]||(e[24]=l=>b(k)?k.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[62]||(e[62]=t("h1",{class:"text-xl font-bold"},"هل أنت متأكد من إلغاء الطلب؟",-1)),e[63]||(e[63]=t("p",null,"عند إلغاء الطلب سيتم حذف جميع المنتجات من السلة ولا يمكن التراجع عن هذه العملية",-1)),t("div",lt,[e[61]||(e[61]=t("p",{class:"font-bold",style:{color:"#000"}},"يرجى اختيار سبب إلغاء الطلب*",-1)),t("div",st,[t("div",ot,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[17]||(e[17]=l=>b(p)?p.value=l:null),inputId:"ingredient1",name:"rejectReason",value:"val1"},null,8,["modelValue"]),e[57]||(e[57]=t("label",{for:"ingredient1"}," تأخر في قبول الطلب",-1))]),t("div",nt,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[18]||(e[18]=l=>b(p)?p.value=l:null),inputId:"ingredient2",name:"rejectReason",value:"val2"},null,8,["modelValue"]),e[58]||(e[58]=t("label",{for:"ingredient2"}," مدة التوصيل طويلة",-1))]),t("div",rt,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[19]||(e[19]=l=>b(p)?p.value=l:null),inputId:"ingredient3",name:"rejectReason",value:"val3"},null,8,["modelValue"]),e[59]||(e[59]=t("label",{for:"ingredient3"}," خطأ في تفاصيل الطلب ",-1))]),t("div",at,[a(T,{modelValue:s(p),"onUpdate:modelValue":e[20]||(e[20]=l=>b(p)?p.value=l:null),inputId:"ingredient4",name:"rejectReason",value:"val4"},null,8,["modelValue"]),e[60]||(e[60]=t("label",{for:"ingredient4"}," أخرى (يرجى التوضيح) ",-1))]),s(p).includes("val4")?(n(),r("div",it,[a(Q,{id:"rejectReasonNote",autoResize:"",modelValue:s(V),"onUpdate:modelValue":e[21]||(e[21]=l=>b(V)?V.value=l:null),rows:"4",cols:"30",class:"w-full p-2 border rounded",placeholder:"يرجى كتابة سبب الرفض هنا..."},null,8,["modelValue"])])):d("",!0)])]),t("div",dt,[t("button",{class:"delete-btn w-100",type:"button",label:"تاكيد الإلغاء",onClick:e[22]||(e[22]=l=>{var f,c;return z((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",ut,"تاكيد الالغاء")),s(o).changeOrderStatueLoading?(n(),r("span",vt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[23]||(e[23]=l=>k.value=!1)})])]),_:1,__:[62,63]},8,["visible"]),a(I,{class:"text-center sendOrderModel",closable:!1,visible:s(g),"onUpdate:visible":e[27]||(e[27]=l=>b(g)?g.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[64]||(e[64]=t("h1",{class:"text-xl font-bold"},"هل أنت متأكد من تسليم الطلب للسائق؟",-1)),e[65]||(e[65]=t("p",null,"بمجرد تأكيد التسليم، سيتم تحديث حالة الطلب، ولن تتمكن من التراجع. يرجى التأكد من تسليم الطلب فعليًا إلى السائق قبل المتابعة.",-1)),t("div",pt,[a(_,{class:"accept-order-btn w-100",type:"button",label:"تاكيد التسليم",onClick:e[25]||(e[25]=l=>g.value=!1)}),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[26]||(e[26]=l=>g.value=!1)})])]),_:1,__:[64,65]},8,["visible"]),u.order.orderStatus==3&&s(m)=="Driver"?(n(),W(I,{key:0,class:"text-center arrivedLocation",closable:!1,visible:s(v),"onUpdate:visible":e[30]||(e[30]=l=>b(v)?v.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[66]||(e[66]=t("h1",{class:"text-xl font-bold"},"هل فعلا وصلت الى موقع العميل ؟",-1)),e[67]||(e[67]=t("p",null,"تأكد انك وصلت الى موقع العميل عند الضفط على تأكيد سيتم ارسال اشعار للعميل انك وصلت",-1)),t("div",ct,[t("button",{class:"accept-order-btn w-100",onClick:e[28]||(e[28]=l=>{var f,c;return A((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",ft," نعم متأكد ")),s(o).changeOrderStatueLoading?(n(),r("span",mt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[29]||(e[29]=l=>v.value=!1)})])]),_:1,__:[66,67]},8,["visible"])):d("",!0),a(I,{class:"text-center acceptOrderModel",closable:!1,visible:s(S),"onUpdate:visible":e[33]||(e[33]=l=>b(S)?S.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[69]||(e[69]=t("h1",{class:"text-xl font-bold"},"هل تريد قبول الطلب",-1)),e[70]||(e[70]=t("p",null,"نحن نعمل على ايجاداقرب سائق لتوصيل الطلب في اسرع وقت ممكن.",-1)),t("div",bt,[e[68]||(e[68]=t("p",{class:"font-bold"},"تفاصيل الطلب : ",-1)),t("span",null,"من : "+C(i.هنا),1),t("span",null,"إلى : "+C(i.هناك),1)]),t("div",gt,[t("button",{class:"accept-order-btn w-100",onClick:e[31]||(e[31]=l=>{var f,c;return E((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",yt," قبول ")),s(o).changeOrderStatueLoading?(n(),r("span",wt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[32]||(e[32]=l=>S.value=!1)})])]),_:1,__:[69,70]},8,["visible"]),a(I,{class:"text-center paidModel",closable:!1,visible:s(L),"onUpdate:visible":e[36]||(e[36]=l=>b(L)?L.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[71]||(e[71]=t("h1",{class:"text-xl font-bold"},"تأكيد تسليم الطلب للعميل",-1)),e[72]||(e[72]=t("p",null,"هل انت متاكد من تسليم الطلب للعميل ؟",-1)),t("div",xt,[t("button",{class:"accept-order-btn w-100",onClick:e[34]||(e[34]=l=>{var f,c;return B((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",St," نعم تأكيد ")),s(o).changeOrderStatueLoading?(n(),r("span",kt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[35]||(e[35]=l=>L.value=!1)})])]),_:1,__:[71,72]},8,["visible"]),a(I,{class:"text-center orderReadyModel",closable:!1,visible:s(P),"onUpdate:visible":e[39]||(e[39]=l=>b(P)?P.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[73]||(e[73]=t("h1",{class:"text-xl font-bold"},"هل الطلب جاهز فعلاً ؟",-1)),e[74]||(e[74]=t("p",null,"تأكد ان الطلب جاهز, سيتم ارسال اشعار للعميل بأن الطلب جاهز وهو في الطريق إليه",-1)),t("div",Ot,[t("button",{class:"accept-order-btn w-100",onClick:e[37]||(e[37]=l=>{var f,c;return H((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",Ct," الطلب جاهز ")),s(o).changeOrderStatueLoading?(n(),r("span",$t)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[38]||(e[38]=l=>P.value=!1)})])]),_:1,__:[73,74]},8,["visible"]),a(I,{class:"text-center orderCompletedModel",closable:!1,visible:s(M),"onUpdate:visible":e[42]||(e[42]=l=>b(M)?M.value=l:null),modal:"",style:{width:"25rem"}},{default:O(()=>[e[75]||(e[75]=t("h1",{class:"text-xl font-bold"},"تأكيد استلام الطلب",-1)),e[76]||(e[76]=t("p",null,"هل انت متاكد من استلام الطلب من السائق ؟",-1)),t("div",Dt,[t("button",{class:"accept-order-btn w-100",onClick:e[40]||(e[40]=l=>{var f,c;return J((c=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:c.orderID)})},[s(o).changeOrderStatueLoading?d("",!0):(n(),r("span",_t," نعم متأكد ")),s(o).changeOrderStatueLoading?(n(),r("span",Vt)):d("",!0)]),a(_,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[41]||(e[41]=l=>M.value=!1)})])]),_:1,__:[75,76]},8,["visible"])],64)}}},It=Y(Ut,[["__scopeId","data-v-65e23cdd"]]),jt=""+new URL("noOrder.H6xsM1Af.svg",import.meta.url).href,Rt={class:"px-4 py-4 card text-center"},Lt={__name:"noResultOrders",props:["mainTitle","description"],setup(u){const o=u;return(w,$)=>(n(),r("div",Rt,[$[0]||($[0]=t("img",{src:jt,alt:""},null,-1)),t("h1",null,C(o.mainTitle),1),t("p",null,C(o.description),1)]))}},Pt=Y(Lt,[["__scopeId","data-v-d1718d0a"]]),Mt={id:"up"},Tt={class:"pr-6 pl-6 mb-4"},Nt={class:"search w-full"},Bt={key:0,class:"flex gap-4 pr-6 pl-6 mt-3"},Gt={key:1,class:"w-full my-5"},Ft={key:2,class:"space-y-4"},qt={key:1,class:"row gap-4"},zt={key:3},At={key:4},Et={__name:"index",setup(u){$e({title:"الطلبات"});const o=te(),w=le(),{Orders:$}=ye(w),x=y(null),m=y([]),D=y(0),j=y(null);we(D,async g=>{var v;j.value=(v=m.value[g])==null?void 0:v.value,x.value==="Client"?j.value==1?await w.GetOrders("","",o.ProfileUser.id,"","","",x.value,!0):await w.GetOrders("",j.value,o.ProfileUser.id,"","","",x.value,!1):x.value==="ServiceProvider"?await w.GetOrders("",j.value,"","","",o.ProfileUser.IdStore,x.value):x.value==="Driver"&&await w.GetOrders("",j.value,"","",o.ProfileUser.id,"",x.value)});const p=K(()=>m.value.map((g,v)=>({label:g.title,value:v}))),V=y(!1),U=()=>{V.value=window.innerWidth<640};xe(async()=>{var v;U(),window.addEventListener("resize",U);const g=localStorage.getItem("user");g&&(o.ProfileUser=JSON.parse(g),x.value=o.ProfileUser.role,x.value==="ServiceProvider"?(m.value=[{title:"جديد",value:"0"},{title:"الحالية",value:""},{title:"الملغية",value:"5"},{title:"المكتملة",value:"6"}],await w.GetOrders("",0,"","","",o.ProfileUser.IdStore)):x.value==="Driver"?(m.value=[{title:"جديد",value:"0"},{title:"الحالية",value:""},{title:"المكتملة",value:"6"}],await w.GetOrders("",0,"","",o.ProfileUser.id)):x.value==="Client"&&(m.value=[{title:"كل الطلبات",value:""},{title:"الحالية",value:"1"},{title:"الملغية",value:"5"},{title:"المكتملة",value:"6"}],await w.GetOrders("",null,o.ProfileUser.id))),j.value=(v=m.value[D.value])==null?void 0:v.value}),Se(()=>{window.removeEventListener("resize",U)});const k=y(""),R=K(()=>{if(!k.value)return $.value;const g=k.value.trim().toLowerCase();return $.value.filter(v=>v.orderDetails&&v.orderDetails.some(S=>S.orderID&&S.orderID.toString().includes(g))||v.orderDetails&&v.orderDetails.some(S=>S.productName&&S.productName.toLowerCase().includes(g)))});return(g,v)=>{const S=oe,L=re,P=ae,M=ie,F=de,q=ue,z=ve,A=It,E=ke,B=Pt,J=ne,H=Oe;return n(),r(N,null,[t("div",Mt,[a(S),t("div",Tt,[v[4]||(v[4]=t("h1",{class:"title"},"الطلبات",-1)),t("div",Nt,[a(M,{class:"w-full"},{default:O(()=>[a(L,{class:"pi pi-search"}),a(P,{class:"search",modelValue:s(k),"onUpdate:modelValue":v[0]||(v[0]=i=>b(k)?k.value=i:null),placeholder:"ابحث برقم او أسم الطلب ..."},null,8,["modelValue"])]),_:1})]),s(V)?(n(),r("div",Gt,[a(z,{modelValue:s(D),"onUpdate:modelValue":v[2]||(v[2]=i=>b(D)?D.value=i:null),options:s(p),"option-label":"label","option-value":"value",placeholder:"اختر القسم",class:"w-full mt-2"},null,8,["modelValue","options"])])):(n(),r("div",Bt,[a(q,{class:"w-full",activeIndex:s(D),"onUpdate:activeIndex":v[1]||(v[1]=i=>b(D)?D.value=i:null)},{default:O(()=>[(n(!0),r(N,null,G(s(m),i=>(n(),W(F,{class:"w-full",key:i.title,header:i.title},null,8,["header"]))),128))]),_:1},8,["activeIndex"])])),s(R).length>0||s(w).loadingStore?(n(),r("div",Ft,[s(w).loadingStore?d("",!0):(n(!0),r(N,{key:0},G(s(R),i=>(n(),W(A,{key:i.orderID,order:i},null,8,["order"]))),128)),s(w).loadingStore?(n(),r("div",qt,[(n(),r(N,null,G(3,i=>a(E,{class:"col-3",type:"card"})),64))])):d("",!0)])):s(x)==="ServiceProvider"?(n(),r("div",zt,[a(B,{mainTitle:"لم تستقبل أي طلبات حتى الآن",description:"بمجرد استلام طلب جديد من أحد العملاء، سيظهر هنا لتتمكن من متابعته بكل سهولة."})])):s(x)=="Driver"?(n(),r("div",At,[a(B,{mainTitle:"لم تستقبل أي طلبات حتى الآن",description:"بمجرد وجود طلب جديد الى اي متجر سيظهر هنا لتتمكن من الحصول عليه لتوصيله بكل سهولة, كما انك ستحصل على اشعار بوجود طلب جديد"})])):d("",!0)]),a(J)]),a(H,{onClicked:v[3]||(v[3]=i=>("scrollTo"in g?g.scrollTo:s(Ce))("up"))})],64)}}},$l=Y(Et,[["__scopeId","data-v-661e9e04"]]);export{$l as default};
