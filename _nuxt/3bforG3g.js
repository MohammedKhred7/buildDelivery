import h from"./Clscm4lu.js";import N from"./TvbeSgkw.js";import x from"./CCPHyqBu.js";import{s as c}from"./DxDbTdgb.js";import w from"./B6lV0hW4.js";import{u as $}from"./VrH1AKeK.js";import{u as V}from"./CdDIJBrp.js";import{_ as S,s as U,e as E,r as u,K as R,c as B,a as r,b as s,d as T,u as t,w as b,o as j,t as M}from"./CqALIQq-.js";import"./DypqVsHU.js";import"./Yjdc5QZq.js";import"./CWXrTWzF.js";import"./CJhDEi4m.js";import"./BoAeHPyv.js";import"./D6h0L3f_.js";import"./as8uRvHu.js";import"./ORw8rJV6.js";import"./KSXwTFMH.js";import"./CD868BvL.js";import"./sCjGwsjs.js";import"./BJ6J5tbx.js";import"./CMLRC_bA.js";import"./Bwxp4xfH.js";import"./CJ75tTpB.js";import"./CGxUnyZs.js";import"./BD18K1CI.js";import"./CGAiw73Z.js";import"./D6fLeLqj.js";const G={class:"py-6 pr-6 pl-6"},H={class:"flex-column gap-2 mb-4"},K={class:"flex justify-content-center gap-2"},O={class:"flex justify-content-center gap-2"},P={__name:"areas",setup(Y){$({title:"إدارة المناطق"});const l=V(),{errorMessage:g,success:y}=U();E(async()=>{l.GetAllArea()}),u([{id:1,name:"YER"},{id:2,name:"SAR"},{id:3,name:"USD"}]);const d=u(!1),i=u(null),f=u(null);async function A(a){f.value=a;let e=await l.allArea.findIndex(v=>v.id===a);i.value=e,d.value=!0}const p=u(!1),o=u({id:null,areaName:""});u(null);async function k(){o.value={id:null,areaName:""},i.value=null,p.value=!0}async function _(a){o.value={...a};let e=await l.allArea.findIndex(v=>v.id===o.value.id);i.value=e,p.value=!0}async function C(){m.value=!0;try{if(i.value===null){const a=await l.CreateArea(o.value);l.sucsses?(o.value.id=a==null?void 0:a.id,y("تم إضافة منقطة جديدة  بنجاح"),l.allArea.push(o.value)):g("مشكلة في الاتصال")}else await l.UpdateArea(o.value),l.sucsses?(y("تم تعديل منقطة جديدة  بنجاح"),l.allArea.splice(i.value,1,{...o.value})):g("مشكلة في الاتصال");l.sucsses=!1,p.value=!1}catch(a){console.log(a)}finally{m.value=!1}}const m=u(!1);async function D(){m.value=!0;try{i.value!==null&&(await l.DeleteArea(f.value),l.sucsses?(y("تم حذف منقطة بنجاح"),l.allArea.splice(i.value,1)):g("مشكلة في الاتصال")),l.sucsses=!1,d.value=!1}catch(a){console.log(a)}finally{m.value=!1}}return R(d,a=>{a===!1&&(f.value=null,i.value=null)},{immediate:!0}),(a,e)=>{const v=h;return j(),B("div",G,[e[7]||(e[7]=r("div",{class:"main-title mb-4"},[r("h1",{class:"pb-3 pr-0"},[T(" إدارة المناطق "),r("i",{class:"pi pi-home pr-3"})])],-1)),r("div",null,[s(t(c),{label:"إضافة منطقة جديدة",class:"mb-3",severity:"success",onClick:k})]),s(t(w),{visible:p.value,"onUpdate:visible":e[2]||(e[2]=n=>p.value=n),modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:b(()=>[r("div",H,[e[5]||(e[5]=r("label",{for:"discountValue"}," إسم المنطقة *",-1)),s(v,{inputId:"integeronly",modelValue:o.value.areaName,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.areaName=n),placeholder:"ادخل إسم المنطقة"},null,8,["modelValue"])]),r("div",K,[s(t(c),{class:"w-100",severity:i.value===null?"success":"warning",icon:"pi pi-check",label:i.value===null?"حفظ":"تحديث",loading:m.value,onClick:C},null,8,["severity","label","loading"]),s(t(c),{class:"cancel-btn w-50",label:"إلغاء",icon:"pi pi-times pl-2",onClick:e[1]||(e[1]=n=>(p.value=!1,i.value=null))})])]),_:1},8,["visible"]),s(t(N),{value:t(l).allArea,rows:5,rowsPerPageOptions:[5,10,20,50],paginator:!0,class:"p-datatable-gridlines"},{default:b(()=>[s(t(x),{style:{"text-align":"start"},field:"id",header:"ID",sortable:""}),s(t(x),{style:{"text-align":"start"},field:"areaName",header:"إسم المنطقة",sortable:""}),s(t(x),{style:{"text-align":"start"},class:"flex gap-2",header:"حذف"},{body:b(n=>[s(t(c),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"w-full gap-2 ml-2",onClick:I=>_(n.data)},null,8,["onClick"]),s(t(c),{label:"حذف",icon:"pi pi-trash",class:"p-button-danger w-full gap-2",onClick:I=>A(n.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),s(t(w),{visible:d.value,"onUpdate:visible":e[4]||(e[4]=n=>d.value=n),modal:"",closable:!1,style:{width:"auto",textAlign:"center",borderRadius:"24px"}},{default:b(()=>[e[6]||(e[6]=r("h1",{class:"font-bold text-xl text-enter"},"حذف رسوم التوصيل",-1)),r("p",null,"هل أنت متأكد أنك تريد حذف رسوم التوصيل بالمعرف "+M(f.value)+"؟",1),r("div",O,[s(t(c),{class:"w-100",severity:"danger",icon:"pi pi-check",label:"تأكيد الحذف",loading:m.value,onClick:D},null,8,["loading"]),s(t(c),{class:"cancel-btn w-50",label:"إلغاء",icon:"pi pi-times pl-2",onClick:e[3]||(e[3]=n=>d.value=!1)})])]),_:1,__:[6]},8,["visible"])])}}},ye=S(P,[["__scopeId","data-v-c0ac353e"]]);export{ye as default};
