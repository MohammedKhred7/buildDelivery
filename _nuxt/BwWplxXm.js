import Z from"./D3z-2-VN.js";import D from"./COyAXlhX.js";import I from"./BaO6X7Fj.js";import B from"./CflC2v0N.js";import{_ as tt}from"./B9ixgvoB.js";import et from"./DOnK2t2o.js";import{_ as st,j as ot,m as lt,f as nt,r as k,k as at,y as rt,e as it,z as dt,X as ct,c as f,o as u,b as c,w as _,g as E,h as m,u as t,a as e,t as a,n as j,d as b,s as ut,F as pt}from"./B8bw-qgz.js";import ft from"./DvmLBxrt.js";import C from"./MEc1MsVC.js";import{u as _t}from"./lnkURd_t.js";import{u as G}from"./DSOkz2e5.js";const L=""+new URL("productReadyIcon.Df4PBi80.svg",import.meta.url).href,mt={class:"card surface-ground p-5 flex justify-content-center"},gt={class:"flex flex-column"},vt={class:"slide-form p-4"},ht={class:""},xt={class:"flex-column gap-2 mb-4"},bt={for:"productName"},wt={class:"flex-column gap-2 mb-4"},yt={for:"arew"},kt={class:"flex-column gap-2 mb-4"},Ct={for:"area"},Vt={class:"flex pt-4 justify-content-end"},St=["onClick"],jt={class:"flex flex-column"},Ut={class:"slide-form p-4 pb-1"},Pt={class:"mb-2"},$t={key:0,class:"file-dev p-4 bg-white flex justify-content-center align-items-center",style:{height:"170px"}},zt={for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},Ot={class:"mt-2"},Rt={class:"text-sm text-gray-500 mt-1"},Nt={class:"text-sm text-gray-500 mt-1"},At={class:"text-sm text-gray-500 mt-1"},Ft={key:1,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},Et=["src","alt"],Gt={class:"slide-form p-4 pt-0"},Lt={class:"mb-2"},Tt={key:0,class:"file-dev p-4 bg-white flex justify-content-center align-items-center mb-2",style:{height:"170px"}},Jt={for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},Kt={class:"mt-2"},Mt={class:"text-sm text-gray-500 mt-1"},Xt={class:"text-sm text-gray-500 mt-1"},qt={class:"text-sm text-gray-500 mt-1"},Ht={key:1,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},Qt=["src","alt"],Wt={key:2,class:"file-dev p-4 bg-white flex justify-content-center align-items-center",style:{height:"170px"}},Yt={for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},Zt={class:"mt-2"},Dt={class:"text-sm text-gray-500 mt-1"},It={class:"text-sm text-gray-500 mt-1"},Bt={class:"text-sm text-gray-500 mt-1"},te={key:3,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},ee=["src","alt"],se={class:"tow-buttons flex pt-4 justify-content-between gap-4"},oe=["onClick"],le=["onClick"],ne={class:"flex flex-column"},ae={class:"py-4"},re={class:"flex-column gap-2 mb-4"},ie={for:"price"},de={class:"flex justify-content-start w-25 mb-3"},ce={key:0},ue={class:"flex-column gap-2 mb-4"},pe={for:"discountValue"},fe={class:"flex-column gap-2 mb-4"},_e={for:"startDate"},me={class:"flex-column gap-2 mb-4"},ge={for:"endDate"},ve={class:"flex w-25 mb-3",style:{float:"left"}},he={class:"font-bold delete-title text-enter"},xe={class:"p-text-secondary"},be={class:"flex justify-content-center gap-2"},we={class:"flex tow-buttons pt-4 justify-content-between gap-4"},ye=["onClick"],ke=["onClick"],Ce={key:1,class:"spinner"},Ve={class:"flex flex-column"},Se={class:"text-center"},je=["alt"],Ue={class:"font-bold"},Pe={class:"flex flex-column"},$e={class:"text-center"},ze=["alt"],Oe={class:"font-bold"},Re={__name:"addProductModel",props:["updateProduct"],setup(T){const $=_t(),{t:o}=ot(),w=lt(),z=nt(),V=G(),S=T,J=dt(),n=k({serviceProviderID:null,storeId:null,categoryId:null,title:"",description:"",discountValue:null,price:null,startDate:null,endDate:null,imagesIdsSerialized:[],images:[]}),r=k([{img:null,url:null,id:null},{img:null,url:null,id:null},{img:null,url:null,id:null}]),O=at(()=>h.value?!!n.value.startDate&&!!n.value.endDate&&!!n.value.price&&!!n.value.discountValue:!!n.value.price);function K(){x.value=!1,n.value.discountValue=null,n.value.startDate=null,n.value.endDate=null,h.value=!1}const M=async()=>{const l=[];for(const s of r.value)if(s!=null&&s.id){const d=s==null?void 0:s.id;l.push(d)}else if(s.img){const d=await w.upladFiles(s.img);l.push(d)}n.value.imagesIdsSerialized=JSON.stringify(l),n.value.images=l};function R(l){const s=String.fromCharCode(l.keyCode);/[0-9]/.test(s)||l.preventDefault()}function U(l,s){const d=l.target.files[0];if(r.value[s].img=l.target.files[0],d&&d.size<=2*1024*1024){const g=new FileReader;g.onload=y=>{r.value[s].url=y.target.result},g.readAsDataURL(d)}else alert("الرجاء اختيار صورة أقل من 2 ميغابايت")}const X=rt(),q=G();it(async()=>{var s,d;$.GetAllCategories();const l=localStorage.getItem("user");if(l?(w.ProfileUser=JSON.parse(l),n.value.serviceProviderID=(s=w.ProfileUser)==null?void 0:s.id,n.value.storeId=(d=w.ProfileUser)==null?void 0:d.IdStore):w.ProfileUser={},S.updateProduct){const g=X.params.id;if(g){let y=await q.GetOfferById(g);await H(y)}}});async function H(l){n.value.title=l==null?void 0:l.title,n.value.description=l==null?void 0:l.description,n.value.discountValue=l==null?void 0:l.discountValue,n.value.price=l==null?void 0:l.price,n.value.endDate=l==null?void 0:l.endDate,n.value.startDate=l==null?void 0:l.startDate,n.value.categoryId=l==null?void 0:l.categoryId,n.value.id=l==null?void 0:l.id,l!=null&&l.images&&l.images.forEach((s,d)=>{r.value[d]&&(r.value[d].url=J.public.urlImage+s,r.value[d].id=s)})}const P=k(!1);async function Q(){P.value=!0;try{await M(),S.updateProduct?await V.PutCreateOffer(n.value):await V.PostCreateOffer(n.value)}catch{}finally{P.value=!1}}const W=()=>{h.value=!h.value},h=k(!1),x=k(!1);return(l,s)=>{const d=Z,g=D,y=I,N=ct("SwiperSlide"),A=B,F=tt,Y=et;return u(),f("div",mt,[c(t(ft),{linear:"",readonly:!0},{default:_(()=>[c(t(C),{class:"surface-ground",dir:"ltr",header:t(o)("products.product_info")},{content:_(({nextCallback:v})=>[e("div",gt,[c(N,null,{default:_(()=>[e("div",vt,[e("div",ht,[e("div",xt,[e("label",bt,a(t(o)("products.product_name"))+" *",1),c(d,{id:"productName",modelValue:t(n).title,"onUpdate:modelValue":s[0]||(s[0]=p=>t(n).title=p),placeholder:t(o)("products.enter_product_name")},null,8,["modelValue","placeholder"])]),e("div",wt,[e("label",yt,a(t(o)("products.category"))+" *",1),c(g,{id:"arew",modelValue:t(n).categoryId,"onUpdate:modelValue":s[1]||(s[1]=p=>t(n).categoryId=p),options:t($).allCategories,optionLabel:"name",placeholder:t(o)("products.select_category"),class:"w-full",optionValue:"id"},null,8,["modelValue","options","placeholder"])]),e("div",kt,[e("label",Ct,a(t(o)("products.product_description")),1),c(y,{id:"area",modelValue:t(n).description,"onUpdate:modelValue":s[2]||(s[2]=p=>t(n).description=p),autoResize:"",rows:"6",cols:"30",placeholder:t(o)("products.description")},null,8,["modelValue","placeholder"])])])])]),_:1})]),e("div",Vt,[e("button",{onClick:p=>t(n).categoryId&&t(n).title?v():null,class:j(t(n).categoryId&&t(n).title?" w-100 add-product-btn":"disabled w-100 add-product-btn")},[b(a(t(o)("products.next"))+" ",1),s[18]||(s[18]=e("i",{class:"pi pi-arrow-circle-left"},null,-1))],10,St)])]),_:1},8,["header"]),c(t(C),{header:t(o)("products.product_image")},{content:_(({prevCallback:v,nextCallback:p})=>[e("div",jt,[c(N,null,{default:_(()=>[e("div",Ut,[e("h3",Pt,a(t(o)("products.insert_product_image"))+" *",1),t(r)[0].url?m("",!0):(u(),f("div",$t,[e("input",{id:"fileUpload",type:"file",onChange:s[3]||(s[3]=i=>U(i,0)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),e("label",zt,[s[19]||(s[19]=e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}},null,-1)),e("span",Ot,a(t(o)("products.click_to_upload_image")),1),e("span",Rt,a(t(o)("products.product_image_type")),1),e("span",Nt,a(t(o)("products.product_image_size")),1),e("span",At,a(t(o)("products.product_image_hint")),1)])])),t(r)[0].url?(u(),f("div",Ft,[e("img",{src:t(r)[0].url,alt:t(o)("products.product_image"),style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,Et),e("button",{class:"btn-remove",onClick:s[4]||(s[4]=i=>(t(r)[0].url=null,t(r)[0].img=null,t(r)[0].id=null))},s[20]||(s[20]=[e("i",{class:"pi pi-trash"},null,-1)]))])):m("",!0)]),e("div",Gt,[e("h3",Lt,a(t(o)("products.add_more_than_one")),1),t(r)[1].url?m("",!0):(u(),f("div",Tt,[e("input",{id:"fileUpload",type:"file",onChange:s[5]||(s[5]=i=>U(i,1)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),e("label",Jt,[s[21]||(s[21]=e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}},null,-1)),e("span",Kt,a(t(o)("products.click_to_upload_image")),1),e("span",Mt,a(t(o)("products.product_image_type")),1),e("span",Xt,a(t(o)("products.product_image_size")),1),e("span",qt,a(t(o)("products.product_image_hint")),1)])])),t(r)[1].url?(u(),f("div",Ht,[e("img",{src:t(r)[1].url,alt:t(o)("products.product_image"),style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,Qt),e("button",{class:"btn-remove",onClick:s[6]||(s[6]=i=>(t(r)[1].url=null,t(r)[1].img=null,t(r)[1].id=null))},s[22]||(s[22]=[e("i",{class:"pi pi-trash"},null,-1)]))])):m("",!0),t(r)[2].url?m("",!0):(u(),f("div",Wt,[e("input",{id:"fileUpload",type:"file",onChange:s[7]||(s[7]=i=>U(i,2)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),e("label",Yt,[s[23]||(s[23]=e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}},null,-1)),e("span",Zt,a(t(o)("products.click_to_upload_image")),1),e("span",Dt,a(t(o)("products.product_image_type")),1),e("span",It,a(t(o)("products.product_image_size")),1),e("span",Bt,a(t(o)("products.product_image_hint")),1)])])),t(r)[2].url?(u(),f("div",te,[e("img",{src:t(r)[2].url,alt:t(o)("products.product_image"),style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,ee),e("button",{class:"btn-remove",onClick:s[8]||(s[8]=i=>(t(r)[2].url=null,t(r)[2].img=null,t(r)[2].id=null))},s[24]||(s[24]=[e("i",{class:"pi pi-trash"},null,-1)]))])):m("",!0)])]),_:1})]),e("div",se,[e("button",{onClick:v,class:"w-100 prev-btn"},[s[25]||(s[25]=e("i",{class:"pi pi-arrow-circle-right"},null,-1)),b(" "+a(t(o)("products.previous")),1)],8,oe),e("button",{onClick:i=>t(r)[0].url?p():null,class:j(t(r)[0].url?"w-100 add-product-btn":" disabled w-100 add-product-btn")},[b(a(t(o)("products.next"))+" ",1),s[26]||(s[26]=e("i",{class:"pi pi-arrow-circle-left"},null,-1))],10,le)])]),_:1},8,["header"]),c(t(C),{header:t(o)("products.price_offers")},{content:_(({prevCallback:v,nextCallback:p})=>[e("div",ne,[e("div",ae,[e("div",re,[e("label",ie,a(t(o)("products.product_price"))+" *",1),c(d,{id:"price",onKeypress:R,inputId:"integeronly",modelValue:t(n).price,"onUpdate:modelValue":s[9]||(s[9]=i=>t(n).price=i),placeholder:t(o)("products.enter_price")},null,8,["modelValue","placeholder"])]),e("div",de,[e("button",{onClick:W,class:"w-100 add-offer-btn gap-2 align-items-center flex justify-content-center"},[b(a(t(o)("products.add_offer"))+" ",1),e("i",{class:j(t(h)?"pi pi-minus":"pi pi-plus")},null,2)])]),t(h)?(u(),f("div",ce,[e("div",ue,[e("label",pe,a(t(o)("products.discount_percentage"))+" *",1),c(d,{id:"discountValue",onKeypress:R,inputId:"integeronly",modelValue:t(n).discountValue,"onUpdate:modelValue":s[10]||(s[10]=i=>t(n).discountValue=i),placeholder:t(o)("products.enter_discount_percentage")},null,8,["modelValue","placeholder"])]),e("div",fe,[e("label",_e,a(t(o)("products.Start_date")),1),c(A,{modelValue:t(n).startDate,"onUpdate:modelValue":s[11]||(s[11]=i=>t(n).startDate=i),showIcon:"",iconDisplay:"input",inputId:"startDate",placeholder:t(o)("products.enter_start_offer_date")},null,8,["modelValue","placeholder"])]),e("div",me,[e("label",ge,a(t(o)("products.End_date")),1),c(A,{modelValue:t(n).endDate,"onUpdate:modelValue":s[12]||(s[12]=i=>t(n).endDate=i),showIcon:"",iconDisplay:"input",inputId:"endDate",placeholder:t(o)("products.enter_end_offer_date")},null,8,["modelValue","placeholder"])]),e("div",ve,[e("button",{onClick:s[13]||(s[13]=i=>x.value=!0),class:"w-100 delete-offer-btn"},[b(a(t(o)("products.delete_offer"))+" ",1),s[27]||(s[27]=e("i",{class:"pi pi-trash"},null,-1))])]),c(Y,{visible:t(x),"onUpdate:visible":s[15]||(s[15]=i=>ut(x)?x.value=i:null),modal:"",style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:_(()=>[e("h1",he,a(t(o)("products.delete_offer")),1),e("p",xe,a(t(o)("products.confirm_delete_offer")),1),e("div",be,[c(F,{class:"delete-btn w-50",type:"button",label:t(o)("products.yes"),severity:"secondary",onClick:K},null,8,["label"]),c(F,{class:"cancel-btn w-50",type:"button",label:t(o)("products.cancel"),onClick:s[14]||(s[14]=i=>x.value=!1)},null,8,["label"])])]),_:1},8,["visible"])])):m("",!0)])]),e("div",we,[e("button",{onClick:v,class:"w-100 prev-btn"},[s[28]||(s[28]=e("i",{class:"pi pi-arrow-circle-right"},null,-1)),b(" "+a(t(o)("products.previous")),1)],8,ye),e("button",{onClick:async()=>{t(O)&&(await Q(),t(V).sucsses&&p()),t(V).sucsses=!1},class:j(t(O)?" w-100 add-product-btn":" disabled w-100 add-product-btn")},[t(P)?(u(),f("span",Ce)):(u(),f(pt,{key:0},[e("span",null,a(t(o)("products.next")),1),s[29]||(s[29]=e("i",{class:"pi pi-arrow-circle-left"},null,-1))],64))],10,ke)])]),_:1},8,["header"]),S.updateProduct?m("",!0):(u(),E(t(C),{key:0,header:t(o)("products.save_sccess")},{default:_(()=>[e("div",Ve,[e("div",Se,[e("img",{src:L,alt:t(o)("products.product_ready")},null,8,je),e("div",Ue,[e("p",null,a(t(o)("products.product_ready")),1),e("p",null,a(t(o)("products.product_ready_details")),1)]),e("button",{onClick:s[16]||(s[16]=v=>t(z).push("/store")),class:"w-100 add-product-btn"},a(t(o)("products.show_offer")),1)])])]),_:1},8,["header"])),S.updateProduct?(u(),E(t(C),{key:1,header:t(o)("products.update_offer_success")},{default:_(()=>[e("div",Pe,[e("div",$e,[e("img",{src:L,alt:t(o)("products.product_ready")},null,8,ze),e("div",Oe,[e("p",null,a(t(o)("products.update_offer_success")),1),e("p",null,a(t(o)("products.update_offer_success_details")),1)]),e("button",{onClick:s[17]||(s[17]=v=>t(z).push("/store")),class:"w-100 add-product-btn"},a(t(o)("products.show_offer")),1)])])]),_:1},8,["header"])):m("",!0)]),_:1})])}}},qe=st(Re,[["__scopeId","data-v-c35ab6bd"]]);export{qe as _};
