import{_ as j}from"./BZg1wCwI.js";import T from"./COyAXlhX.js";import A from"./_hb0CI4I.js";import n from"./CZbfs1Tj.js";import{s as v}from"./DDyLTzb0.js";import _ from"./DOnK2t2o.js";import p from"./D3z-2-VN.js";import{u as R}from"./BWrH_0R2.js";import{u as B}from"./BVGFqH36.js";import{_ as F,K as M,e as E,r,c as x,a as l,b as t,d as N,H as G,w as m,u as s,o as g,t as H,h}from"./B8bw-qgz.js";import"./D89hGFUH.js";import"./Dz-7mMxJ.js";import"./Cy8lMCAr.js";import"./CdANXqyF.js";import"./tnWtlJkU.js";import"./C7GAp4r8.js";import"./D_nHn-NJ.js";import"./DKS4LJ3o.js";import"./CG77IQb3.js";import"./BqAhhW5w.js";import"./BawmCFSI.js";import"./Bq9Wevo-.js";import"./D2zh2Ohw.js";import"./F-oyqQTZ.js";import"./z7rOlAwU.js";import"./CElyrDPd.js";import"./Be4sXn-J.js";import"./Dwnst9H8.js";const L={class:"py-6"},P={class:"empty-state"},z={class:"flex justify-content-center gap-2"},K={key:0},O={key:1,class:"spinner"},q={class:"p-fluid p-0"},J={class:"flex justify-content-between align-items-center gap-4"},Q={class:"card flex flex-column gap-2 mb-4 w-100"},W={class:"flex flex-column gap-2 mb-4 w-100"},X={class:"flex justify-content-between align-items-center gap-4"},Y={class:"flex flex-column gap-2 mb-4 w-100"},Z={class:"flex flex-column gap-2 mb-4 w-100"},ee={class:"flex justify-content-between align-items-center gap-4"},le={class:"flex flex-column gap-2 mb-4 w-100"},se={class:"flex flex-column gap-2 mb-4 w-100"},te={class:"flex justify-content-end mt-4 gap-2 w-50"},ae={__name:"users",setup(oe){const i=R(),{allUsers:k}=M(i);B({title:"إدارة المستخدمين"}),E(()=>{i.GetAllUsers()});const I=r([{id:0,name:"Admin"},{id:1,name:"Client"},{id:2,name:"ServesProvider"},{id:3,name:"Driver"}]),d=r(!1),w=r(null),u=r(null);function U(c,e){u.value=c,w.value=e,d.value=!0}async function C(){u!==null&&(await i.DeleteUser(u.value),i.isSuccess&&(i.GetAllUsers(),d.value=!1,u.value=null,w.value=null))}const b=r(!1),f=r(!1),o=r({id:null,fullName:"",userName:"",email:"",password:"",phone:"",accountTypeId:null});let y=null;function D(){if(f.value)users.value.splice(y,1,{...o.value});else{const c=users.value.length?Math.max(...users.value.map(e=>e.id))+1:1;users.value.push({id:c,...o.value})}V()}function V(){b.value=!1,o.value={id:null,userName:"",email:"",password:""},y=null}return(c,e)=>{const S=j,$=T;return g(),x("div",L,[e[18]||(e[18]=l("div",{class:"main-title mb-4"},[l("h1",{class:"pb-3 pr-0"},[N(" إدارة المستخدمين "),l("i",{class:"pi pi-users pr-3"})])],-1)),e[19]||(e[19]=l("div",null,null,-1)),t(s(A),{value:s(k),rows:5,rowsPerPageOptions:[5,10,20,50],paginator:"",class:"p-datatable-gridlines"},G({default:m(()=>[t(s(n),{style:{"text-align":"start"},field:"id",header:"ID",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"fullName",header:"الاسم الكامل",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"userName",header:"اسم المستخدم",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"email",header:"الايميل",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"phone",header:"الهاتف",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"accountStatus",header:"حاله الحساب",sortable:""}),t(s(n),{style:{"text-align":"start"},field:"role",header:"نوع الحساب",sortable:""}),t(s(n),{style:{"text-align":"start"},header:"إجراء"},{body:m(a=>[t(s(v),{label:"حذف",icon:"pi pi-trash",class:"p-button-danger gap-2",onClick:ie=>U(a.data.id,a.rowIndex)},null,8,["onClick"])]),_:1})]),_:2},[s(i).loadingStore?{name:"empty",fn:m(()=>[l("div",P,[t(S,{size:"sm",color:"help",class:"flex justify-content-center"}),e[9]||(e[9]=l("p",{class:"text-xl bold-18 lh-24 pb-6"},"تحميل المستخدمين يرجى الانتظار ......",-1))])]),key:"0"}:void 0]),1032,["value"]),t(s(_),{visible:d.value,"onUpdate:visible":e[1]||(e[1]=a=>d.value=a),modal:"",closable:!1,style:{width:"auto",textAlign:"center",borderRadius:"24px"}},{default:m(()=>[e[11]||(e[11]=l("h1",{class:"font-bold text-xl"},"حذف مستخدم",-1)),l("p",null,"هل أنت متأكد أنك تريد حذف المستخدم بالمعرف "+H(u.value)+"؟",1),l("div",z,[l("button",{class:"delete-btn w-100",type:"button",label:"تاكيد الحذف",onClick:C},[s(i).loadingStore?h("",!0):(g(),x("span",K,e[10]||(e[10]=[l("i",{class:"pi pi-check"},null,-1),N(" تأكيد الحذف ")]))),s(i).loadingStore?(g(),x("span",O)):h("",!0)]),t(s(v),{class:"cancel-btn w-50",label:"إلغاء",icon:"pi pi-times pl-2",onClick:e[0]||(e[0]=a=>d.value=!1)})])]),_:1,__:[11]},8,["visible"]),t(s(_),{visible:b.value,"onUpdate:visible":e[8]||(e[8]=a=>b.value=a),modal:"",closable:!1,header:f.value?"تعديل مستخدم":"إضافة مستخدم",style:{width:"550px",marginLeft:"16px",marginRight:"16px",borderRadius:"24px",textAlign:"start"}},{default:m(()=>[l("div",q,[l("div",J,[l("div",Q,[e[12]||(e[12]=l("label",{for:"fullName",class:"pl-0 pr-0"},"الاسم الكامل",-1)),t(s(p),{id:"fullName",placeholder:"ادخل الاسم الكامل",modelValue:o.value.fullName,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.fullName=a)},null,8,["modelValue"])]),l("div",W,[e[13]||(e[13]=l("label",{for:"userName",class:"pl-0 pr-0"},"اسم المستخدم",-1)),t(s(p),{id:"userName",placeholder:"ادخل اسم المستخدم",modelValue:o.value.userName,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.userName=a)},null,8,["modelValue"])])]),l("div",X,[l("div",Y,[e[14]||(e[14]=l("label",{for:"email",class:"pl-0 pr-0"},"الايميل",-1)),t(s(p),{id:"email",placeholder:"ادخل البريد الالكتروني",modelValue:o.value.email,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.email=a)},null,8,["modelValue"])]),l("div",Z,[e[15]||(e[15]=l("label",{for:"password",class:"pl-0 pr-0"},"كلمة السر",-1)),t(s(p),{id:"password",placeholder:"ادخل كلمة السر",type:"password",modelValue:o.value.password,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.password=a)},null,8,["modelValue"])])]),l("div",ee,[l("div",le,[e[16]||(e[16]=l("label",{for:"email",class:"pl-0 pr-0"},"الهاتف",-1)),t(s(p),{id:"email",placeholder:"ادخل هاتف المستخدم",modelValue:o.value.phone,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.phone=a)},null,8,["modelValue"])]),l("div",se,[e[17]||(e[17]=l("label",{for:"password",class:"pl-0 pr-0"},"نوع الحساب",-1)),t($,{id:"arew",modelValue:o.value.accountTypeId,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.accountTypeId=a),options:I.value,optionLabel:"name",placeholder:"حدد نوع الحساب",class:"w-full",optionValue:"id"},null,8,["modelValue","options"])])])]),l("div",te,[t(s(v),{class:"w-100",label:f.value?"تأكيد التعديل":"حفظ",severity:f.value?"warning":"success",icon:"pi pi-check pl-2",onClick:D},null,8,["label","severity"]),t(s(v),{class:"w-100",label:"إلغاء",icon:"pi pi-times pl-2",severity:"secondary",onClick:V})])]),_:1},8,["visible","header"])])}}},Re=F(ae,[["__scopeId","data-v-400a22da"]]);export{Re as default};
