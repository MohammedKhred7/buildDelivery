import A from"./DxgpkGTD.js";import{W as O,X as S,e as M,Y as V,Z as I,$ as z,c as E,a0 as P,_ as j,r as s,V as L,g as D,o as F,w as C,a as o,b as k,d as x,t as w}from"./2_s1o7K9.js";const H=Symbol.for("nuxt:client-only"),K=O({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(v,{slots:r,attrs:c}){const d=S(!1);M(()=>{d.value=!0});const u=V();return u&&(u._nuxtClientOnly=!0),P(H,!0),()=>{var f;if(d.value){const i=(f=r.default)==null?void 0:f.call(r);return i&&i.length===1?[I(i[0],c)]:i}const g=r.fallback||r.placeholder;if(g)return z(g);const p=v.fallback||v.placeholder||"",m=v.fallbackTag||v.placeholderTag||"span";return E(m,c,p)}}}),R={class:"flex justify-content-between gap-2 w-full align-items-center pl-4 pr-4 search-map"},U={class:"w-full"},W={class:"Google-Map"},X={class:"flex gap-2 pr-3 pl-3"},Y={__name:"map",emits:["confirm"],setup(v,{emit:r}){const c=s({lat:14.54,lng:49.13}),d=s(12),u=s({...c.value}),g=s(""),p=s(c.value.lat),m=s(c.value.lng),f=s(null),i=s(""),_=s(""),B=r;function G(){B("confirm",i.value,_.value,p.value,m.value)}function b(a){new google.maps.Geocoder().geocode({location:a},(n,t)=>{if(t==="OK"&&n[0]){g.value=n[0].formatted_address,i.value="",_.value="";for(const l of n[0].address_components)l.types.includes("locality")?i.value=l.long_name:l.types.includes("route")&&(_.value=l.long_name);!_.value&&n[0].address_components.length>0&&(_.value=n[0].address_components[0].long_name)}else g.value="error get name"})}function T(a){const e=a.latLng.lat(),n=a.latLng.lng();p.value=e,m.value=n;const t={lat:e,lng:n};u.value=t,b(t)}function N(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{const e=a.coords.latitude,n=a.coords.longitude,t={lat:e,lng:n};c.value=t,u.value=t,p.value=e,m.value=n,d.value=16,f.value=google.maps.Animation.BOUNCE,b(t),setTimeout(()=>{f.value=null},2e3)},a=>{alert("Geolocation failed: "+a.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")}return M(()=>{const a=()=>{if(window.google&&window.google.maps&&window.google.maps.places){const e=document.getElementById("searchBox"),n=new google.maps.places.SearchBox(e);n.addListener("places_changed",()=>{const t=n.getPlaces();if(!t||t.length===0)return;const l=t[0];if(!l.geometry||!l.geometry.location)return;const y=l.geometry.location,h={lat:y.lat(),lng:y.lng()};c.value=h,u.value=h,p.value=h.lat,m.value=h.lng,d.value=16,g.value=l.name})}else setTimeout(a,300)};a()}),(a,e)=>{const n=A,t=L("GMapMarker"),l=L("GMapMap"),y=K;return F(),D(y,null,{default:C(()=>[o("div",null,[o("div",R,[o("div",U,[k(n,{id:"searchBox",class:"w-full",type:"text",placeholder:"ابحث عن مكان ..."})]),o("div",{class:"w-full flex justify-content-end ml-3"},[o("button",{onClick:N,class:"get-location-btn"},e[0]||(e[0]=[x(" تحديد موقعك "),o("i",{class:"pi pi-map-marker"},null,-1)]))])]),o("div",W,[k(l,{center:c.value,zoom:d.value,style:{width:"100%",height:"400px"},onClick:T},{default:C(()=>[k(t,{position:u.value,icon:"/image/location.svg",animation:f.value},null,8,["position","animation"])]),_:1},8,["center","zoom"])]),o("div",X,[e[3]||(e[3]=o("p",null,[o("i",{class:"pi pi-map-marker text-orange-500"})],-1)),o("p",null,w(g.value||"No name"),1),o("p",null,[e[1]||(e[1]=o("strong",null,"Latitude : ",-1)),x(" "+w(p.value),1)]),o("p",null,[e[2]||(e[2]=o("strong",null,"Longitude : ",-1)),x(" "+w(m.value),1)])]),o("div",{class:"flex gap-2 pr-3 pl-3"},[o("button",{onClick:G,class:"get-location-btn pr-3 pl-3"}," تأكيد العنوان ")])])]),_:1})}}},q=j(Y,[["__scopeId","data-v-dfafac2e"]]);export{q as _};
