import{_ as E,a as G}from"./CrNvm3DK.js";import{_ as H}from"./BVCY8bq8.js";import{_ as q}from"./B9ixgvoB.js";import J from"./DOnK2t2o.js";import{x as L,f as P,y as U,r as m,e as K,c as f,b as a,a as e,d as _,t as d,u as s,h as j,w as N,s as Q,T as W,F as T,i as X,o as g,z as Y,n as Z}from"./B8bw-qgz.js";import{u as tt}from"./BVGFqH36.js";import{u as et}from"./DSOkz2e5.js";import"./BDufnC7Z.js";import"./Cj21L3Vi.js";import"./CdANXqyF.js";import"./DDjvz5j0.js";import"./DDyLTzb0.js";import"./Dwnst9H8.js";import"./Cy8lMCAr.js";import"./CElyrDPd.js";import"./BAjhaC56.js";import"./DAkP3l9d.js";import"./D3z-2-VN.js";import"./CguioKPc.js";import"./Dx7OPG78.js";import"./DNuz2RVM.js";const st={class:"pr-6 pl-6 mt-4 align-items-center flex gap-2"},ot={class:"font-bold"},nt={class:"pr-6 pl-6 mt-4 mb-6b Product-Details flex justify-content-center gap-8"},it={class:"bg-white rounded-xl shadow-md p-4 w-full"},lt={class:"text-4xl font-bold mb-2 text-gray-800"},rt={class:"flex align-items-center justify-content-between mb-2"},at={class:"text-end"},dt={class:"text-orange-500 font-semibold"},ct={class:"line-through text-gray-500 text-sm mr-2"},ut={class:"flex align-items-center mt-2"},pt={key:0,class:"badge dicount-diteles"},mt={class:"text-gray-700 leading-relaxed mb-4 text-sm"},ft={class:"mt-3 mb-3"},_t={class:"product-btns flex gap-2"},gt={class:"flex justify-content-center gap-2"},bt={class:"flex align-items-center gap-4 w-full justify-center"},xt={class:"flex align-items-center max-w-md border rounded-xl overflow-hidden shadow-md"},yt=["src"],vt={key:0,class:"flex flex-column gap-2"},Dt=["onClick"],It=["src"],Pt={__name:"[id]",setup(Bt){tt({title:"تفاصيل المنتج"});const{success:A}=L(),o=et(),I=P(),x=U(),y=m(null),B=Y();async function M(){const i=x.params.id;i&&(await o.DeleteOffer(i),o.sucsses&&(A("تم حذف المنتج بنجاح"),I.push("/store")))}K(async()=>{var t;const i=localStorage.getItem("user");if(i){let l=JSON.parse(i),r=null;l!=null&&l.IdStore&&(r=await o.GetStoreById(l.IdStore)),r&&(y.value=r);const p=x.params.id;if(p){let v=await o.GetOfferById(p);o.productForDetilesById=O(v),c.value=(t=o.productForDetilesById)==null?void 0:t.imagesIds}}});const c=m(null);function O(i){const t=i,l=t.discountValue>0?Math.round(t.price/(1-t.discountValue/100)):t.price,r=t.discountValue>0?Math.round(t.price*(1-t.discountValue/100)):t.price;return{id:t.id,title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,discountValue:t.discountValue,price:t.price,priceBeforeDiscount:l,priceAfterDiscount:r,imagesIds:t.images}}const b=m(0);m(null);const u=m(!1);return(i,t)=>{var w,h,F,V,k,S,C,R,$;const l=E,r=H,p=q,v=J,z=G;return g(),f(T,null,[a(l),e("nav",st,[t[4]||(t[4]=e("span",null,"المطاعم",-1)),t[5]||(t[5]=_()),t[6]||(t[6]=e("span",null,[e("i",{class:"pi pi-angle-left"})],-1)),e("span",null,d((w=s(y))==null?void 0:w.name),1),t[7]||(t[7]=e("span",null,[e("i",{class:"pi pi-angle-left"})],-1)),e("span",ot,d((h=s(o).productForDetilesById)==null?void 0:h.title),1)]),e("div",nt,[e("div",it,[e("h2",lt,d((F=s(o).productForDetilesById)==null?void 0:F.title),1),e("div",rt,[e("div",at,[e("p",dt,[_(d((V=s(o).productForDetilesById)==null?void 0:V.priceAfterDiscount)+" ر.س ",1),e("span",ct,d((k=s(o).productForDetilesById)!=null&&k.discountValue?s(o).productForDetilesById.price+" ر.س":""),1)])]),e("div",ut,[(S=s(o).productForDetilesById)!=null&&S.discountValue?(g(),f("div",pt,[t[8]||(t[8]=e("i",{class:"pi pi-bolt"},null,-1)),_(" "+d("خصم : "+((C=s(o).productForDetilesById)==null?void 0:C.discountValue)+" % "),1)])):j("",!0)])]),t[13]||(t[13]=e("h2",{class:"font-bold mb-2 text-gray-800"}," وصف المنتج ",-1)),e("p",mt,d((R=s(o).productForDetilesById)==null?void 0:R.description),1),e("div",ft,[a(r,{restaurant:s(y)},null,8,["restaurant"])]),t[14]||(t[14]=e("h2",{class:"font-bold"},"إعدادات المنتج",-1)),e("div",_t,[e("button",{onClick:t[0]||(t[0]=n=>s(I).push(`/store/update-product/${s(x).params.id}`)),class:"edit-product-btn"},t[9]||(t[9]=[_(" تعديل "),e("i",{class:"pi pi-pen-to-square mr-2"},null,-1)])),e("button",{onClick:t[1]||(t[1]=n=>u.value=!0),class:"w-100 delete-btn"},t[10]||(t[10]=[_("حذف "),e("i",{class:"pi pi-trash"},null,-1)])),a(v,{closable:!1,visible:s(u),"onUpdate:visible":t[3]||(t[3]=n=>Q(u)?u.value=n:null),modal:"",style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:N(()=>[t[11]||(t[11]=e("h1",{class:"text-xl font-bold delete-title text-enter"},"حذف المنتج",-1)),t[12]||(t[12]=e("p",{class:"p-text-secondary"},"هل أنت متأكد من حذف المنتج ؟",-1)),e("div",gt,[a(p,{class:"delete-btn w-50",type:"button",label:"نعم",severity:"secondary",onClick:M}),a(p,{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:t[2]||(t[2]=n=>u.value=!1)})])]),_:1,__:[11,12]},8,["visible"])])]),e("div",bt,[e("div",xt,[a(W,{name:"fade",mode:"out-in"},{default:N(()=>{var n;return[e("img",{src:(n=s(c))!=null&&n[s(b)]?s(B).public.urlImage+s(c)[s(b)]:"",class:"img-center"},null,8,yt)]}),_:1})]),(($=s(c))==null?void 0:$.length)>1?(g(),f("div",vt,[(g(!0),f(T,null,X(s(c),(n,D)=>(g(),f("div",{key:D,onClick:wt=>b.value=D,class:Z(["product-card",s(b)===D?"border-orange-500":"border-gray-200"])},[e("img",{src:s(B).public.urlImage+n,class:"object-contain img-product"},null,8,It)],10,Dt))),128))])):j("",!0)])]),a(z)],64)}}};export{Pt as default};
