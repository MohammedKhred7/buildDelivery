import{_ as oe,a as ae}from"./A1xEsKNP.js";import ie from"./BgNuXLyY.js";import de from"./B-Mp6cAT.js";import re from"./vVjH2uJ3.js";import ue from"./Dzi4cSGc.js";import{s as y}from"./CCmkkl26.js";import{_ as h,c as v,o as m,a as t,t as N,b as a,u as n,g as R,d as U,j as pe,r,m as F,k as ce,s as me,K as P,G as fe,w as c,q as $,F as I,h as q,f as ve,n as _e}from"./qDFJmlQx.js";import{_ as be}from"./DhpARATq.js";import xe from"./lNKfcDFs.js";import{_ as ge}from"./B8uriuWu.js";import ye from"./DTdNbayZ.js";import{u as we}from"./BrO6BlyS.js";import{u as De}from"./a2nBT0Gf.js";import"./DDvmoFmd.js";import"./Dl2oNPnc.js";import"./DOlnrDoI.js";import"./B1P_YzXm.js";import"./Bo0E5sA_.js";import"./Duf0grDg.js";import"./DURZBW1E.js";import"./B_yfNt1-.js";import"./DcIA3r71.js";import"./CrJfGBGB.js";import"./CskTFfgv.js";import"./CSJ9-ILW.js";import"./BBqVsaH7.js";import"./Dk3C6oiv.js";import"./BeMtbya_.js";import"./DpvgQ5o6.js";import"./k_8gtwoA.js";import"./DLZvWQd4.js";import"./DieFsarj.js";import"./Czsec1E_.js";import"./BKA0qyvo.js";const ke={class:"card p-3 mb-4"},$e={class:"heading flex align-items-center justify-content-between"},Ae={class:"title font-bold"},Ce={class:"buttons flex gap-2 p-2"},Le={class:"full-address flex gap-2 justify-content-between mt-2"},Ve={key:0,class:"notChoosen"},Se={key:1,class:"choosen"},Ie={__name:"addressCard",props:["Address","id","index"],setup(j){const s=j;return(_,d)=>{var C,w,x,u,p;return m(),v("div",null,[t("div",ke,[t("div",$e,[t("div",Ae,N((C=s.Address)==null?void 0:C.description),1),t("div",Ce,[a(n(y),{icon:"pi pi-trash",onClick:d[0]||(d[0]=f=>_.$emit("deleteAddress",s.id,s.index))}),a(n(y),{icon:"pi pi-pen-to-square",onClick:d[1]||(d[1]=f=>_.$emit("editAddress",s.id,s.index))})])]),t("div",Le,[t("p",null,N(((w=s.Address)==null?void 0:w.city)+" - "+((x=s.Address)==null?void 0:x.addressLine)),1),t("div",{class:"defaultAddress font-bold py-2 px-3 align-items-center flex",onClick:d[2]||(d[2]=f=>_.$emit("clickDefault",s.id,s.index))},[(u=s.Address)!=null&&u.isDefault?R("",!0):(m(),v("span",Ve,"اختيار كعنوان افتراضي ")),(p=s.Address)!=null&&p.isDefault?(m(),v("span",Se,d[3]||(d[3]=[U(" العنوان الافتراضي "),t("i",{class:"pi pi-check-circle pr-2"},null,-1)]))):R("",!0)])])])])}}},Ue=h(Ie,[["__scopeId","data-v-c0700b43"]]),je=""+new URL("noAdress.BBftCfd3.svg",import.meta.url).href,Me={},Be={class:"px-4 py-4 card text-center"};function he(j,s){return m(),v("div",Be,s[0]||(s[0]=[t("img",{src:je,alt:""},null,-1),t("h1",null,"لا توجد عناوين مضافة",-1),t("p",null,"أضف عنوان التوصيل لتتمكن من طلب المنتجات بسرعة وسهولة.",-1)]))}const Ee=h(Me,[["render",he],["__scopeId","data-v-8a1eb2b1"]]),Ge={class:"mb-6"},Ne={class:"pr-6 pl-6","data-aos":"fade-up"},Re={class:"flex align-items-center justify-content-between"},Fe={class:"flex justify-content-between mb-2"},Pe={class:"mt-4 search","data-aos":"fade-up"},qe={"data-aos":"fade-up",class:"flex gap-2 align-items-center text-gray-600 font-medium white-space-nowrap mr-2 ml-2"},Te={class:"row gap-4"},He={class:"flex flex-column"},Oe={class:"flex gap-3"},ze={class:"flex-column w-100 gap-2 mb-4"},Je={class:"flex-column w-100 gap-2 mb-4"},Ke={class:"flex gap-3"},Qe={class:"flex-column w-100 gap-2 mb-4"},We={class:"buttons flex gap-3 mt-4"},Xe={key:1,class:"spinner"},Ye={class:"flex justify-content-center gap-2"},Ze={class:"flex justify-content-center gap-2"},et={__name:"index",setup(j){we({title:"العناوين"});const s=pe();De();const _=r(""),d=r(!1),C=F(()=>{const l=_.value.trim().toLowerCase();return s.locationData.filter(e=>{const b=!l||e.description.toLowerCase().includes(l),A=!d.value||e.isDefault===!0;return b&&A})});ce(async()=>{await s.GetLocationPaged();const l=localStorage.getItem("user")||null;if(l){let e=JSON.parse(l);i.value.userID=e.id}});const{errorMessage:w,success:x}=me(),u=r(!1),p=r(!1),f=r(!1);async function T(){D.value&&(await s.DeleteLocation(D.value),s.locationData.splice(k.value,1),s.sucsses?x("تم حذف العنوان بنجاح"):w("مشكلة في الاتصال"),s.sucsses=!1,p.value=!1)}function H(l,e,b,A){f.value=!1,i.value.city=l,i.value.addressLine=e,i.value.latitude=b,i.value.longitude=A}const i=r({city:null,addressLine:null,description:null,isDefault:!1,latitude:14.54,longitude:49.13,userID:null}),E=F(()=>{const l=i.value;return!l.city||!l.addressLine||!l.description||!l.latitude||!l.longitude}),M=r(!1);async function O(){M.value=!0;try{let l=null;L.value?l=await s.PutUpdateLocation(i.value):l=await s.PostCreateLocation(i.value),s.sucsses?L.value?(x("تم تعديل العنوان بنجاح"),s.GetLocationPaged()):(x("تم إضافة العنوان بنجاح"),s.locationData.unshift(l)):w("مشكلة في الاتصال"),s.sucsses=!1,u.value=!1}catch(l){console.log(l)}finally{M.value=!1}}const L=r(!1),G=r(null);async function z(l,e){let b=await s.GetLocationById(l);b&&(i.value={...b},u.value=!0,L.value=!0,G.value=e)}P(u,l=>{l===!1&&(L.value=!1,G.value=null)});const g=r(!1),D=r(null),k=r(null);function J(l,e){D.value=l,k.value=e,g.value=!0}function K(l,e){D.value=l,k.value=e,p.value=!0}async function Q(){await s.SetDefaultLocation(D.value,i.value.userID)?(x("تم تعديل العنوان الافتراضي بنجاح"),s.locationData.find(e=>e.isDefault===!0).isDefault=!1,s.locationData[k.value].isDefault=!0,s.DefaultLocation=s.locationData[k.value]):w(" حصل خطاء لا يمكنك تعديل العنوان الافتراضي"),g.value=!1}return P(()=>g.value||p.value,l=>{l===!1&&(D.value=null,k.value=null)}),(l,e)=>{const b=oe,A=ie,V=de,W=re,X=ue,Y=Ue,Z=be,ee=Ee,te=xe,se=ge,S=ye,le=ae;return m(),v(I,null,[a(b,{id:"up"}),t("div",Ge,[e[28]||(e[28]=t("nav",{"data-aos":"fade-up",class:"pr-6 pl-6 mt-4 mb-3 align-items-center flex gap-2"},[t("span",null,"الرئيسية"),U(),t("span",null,[t("i",{class:"pi pi-angle-left"})]),t("span",null,"الاعدادات"),U(),t("span",null,[t("i",{class:"pi pi-angle-left"})]),t("span",{class:"font-bold"},"العناوين")],-1)),t("div",Ne,[t("div",Re,[e[15]||(e[15]=t("h1",{class:"title"},"العناوين",-1)),t("button",{class:"add-product-btn px-3",onClick:e[0]||(e[0]=o=>u.value=!0)},e[14]||(e[14]=[U(" اضافة عنوان جديد "),t("i",{class:"pi pi-plus"},null,-1)]))]),a(te,{value:n(C),paginator:!0,rows:5},fe({header:c(()=>[t("div",Fe,[t("div",Pe,[a(W,{class:"w-full"},{default:c(()=>[a(A,{class:"pi pi-search"}),a(V,{class:"search",modelValue:n(_),"onUpdate:modelValue":e[1]||(e[1]=o=>$(_)?_.value=o:null),placeholder:"البحث على عنوان"},null,8,["modelValue"])]),_:1})]),t("div",qe,[a(X,{"input-id":"check",modelValue:n(d),"onUpdate:modelValue":e[2]||(e[2]=o=>$(d)?d.value=o:null),binary:!0},null,8,["modelValue"]),e[16]||(e[16]=t("label",{for:"check",class:"cursor-pointer"},"عرض العنوان الافتراضي",-1))])])]),list:c(o=>[(m(!0),v(I,null,q(o.items,(B,ne)=>(m(),ve(Y,{class:"mt-2",key:B.id,onDeleteAddress:K,Address:B,id:B.id,index:ne,onEditAddress:z,onClickDefault:J},null,8,["Address","id","index"]))),128))]),_:2},[n(s).loading?{name:"empty",fn:c(()=>[t("div",Te,[(m(),v(I,null,q(3,o=>a(Z,{class:"col-3",type:"card"})),64))])]),key:"0"}:{name:"empty",fn:c(()=>[t("div",null,[e[17]||(e[17]=t("br",null,null,-1)),a(ee)])]),key:"1"}]),1032,["value"])]),a(S,{visible:n(f),"onUpdate:visible":e[3]||(e[3]=o=>$(f)?f.value=o:null),header:"اختر عنوانك على الخريطة",modal:!0,class:"p-fluid",style:{width:"1000px",textAlign:"center",borderRadius:"24px"}},{default:c(()=>[t("div",null,[a(se,{onConfirm:H})])]),_:1},8,["visible"]),a(S,{visible:n(u),"onUpdate:visible":e[9]||(e[9]=o=>$(u)?u.value=o:null),modal:"",header:"عنوان جديد",style:{width:"45rem"}},{default:c(()=>[t("div",He,[t("div",null,[t("div",Oe,[t("div",ze,[e[18]||(e[18]=t("label",{for:"city"},"المدينة *",-1)),a(V,{id:"city",modelValue:n(i).city,"onUpdate:modelValue":e[4]||(e[4]=o=>n(i).city=o),placeholder:"ادخل المدينة ",class:"w-full"},null,8,["modelValue"])]),t("div",Je,[e[19]||(e[19]=t("label",{for:"addressLine"},"الشارع *",-1)),a(V,{id:"addressLine",modelValue:n(i).addressLine,"onUpdate:modelValue":e[5]||(e[5]=o=>n(i).addressLine=o),placeholder:"ادخل اسم الشارع ورقمه"},null,8,["modelValue"])])]),t("div",Ke,[t("div",Qe,[e[20]||(e[20]=t("label",{for:"description"},"تفاصيل العنوان *",-1)),a(V,{id:"description",modelValue:n(i).description,"onUpdate:modelValue":e[6]||(e[6]=o=>n(i).description=o),placeholder:"ادخل تفاصيل العنوان"},null,8,["modelValue"])])]),t("div",We,[t("button",{class:_e(n(E)?"disabled add-product-btn w-50 ":"add-product-btn w-50 "),onClick:e[7]||(e[7]=o=>n(E)?null:O())},[n(M)?(m(),v("span",Xe)):(m(),v(I,{key:0},[e[21]||(e[21]=t("span",{class:"text-sm"},"حفظ العنوان",-1)),e[22]||(e[22]=t("i",{class:"pi pi-arrow-circle-left"},null,-1))],64))],2),a(n(y),{onClick:e[8]||(e[8]=o=>f.value=!n(f)),class:"w-50 cancel-btn flex justify-content-center align-items-center gap-2"},{default:c(()=>e[23]||(e[23]=[t("span",{class:"text-orange-500 text-sm"}," تحديد العنوان من الخريطة ",-1),t("i",{class:"pi pi-map-marker text-orange-500"},null,-1)])),_:1,__:[23]})])])])]),_:1},8,["visible"]),a(S,{visible:n(p),"onUpdate:visible":e[11]||(e[11]=o=>$(p)?p.value=o:null),modal:"",closable:!1,style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:c(()=>[e[24]||(e[24]=t("h1",{class:"font-bold text-xl text-enter"},"حذف عنوان",-1)),e[25]||(e[25]=t("p",{class:"p-text-secondary",style:{"line-height":"1.5"}},"عند بدء طلب جديد من متجر آخر ، سيتم إزالة عنوان سلة تسوقك من متجر .",-1)),t("div",Ye,[a(n(y),{class:"delete-btn w-50",type:"button",label:"تأكيد الحذف",onClick:T,loading:n(s).loadingDelete},null,8,["loading"]),a(n(y),{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:e[10]||(e[10]=o=>p.value=!1)})])]),_:1,__:[24,25]},8,["visible"]),a(S,{visible:n(g),"onUpdate:visible":e[13]||(e[13]=o=>$(g)?g.value=o:null),modal:"",closable:!1,style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:c(()=>[e[26]||(e[26]=t("h1",{class:"font-bold text-xl text-enter"},"اختيار العنوان كأفتراضي",-1)),e[27]||(e[27]=t("p",{class:"p-text-secondary",style:{"line-height":"1.5"}}," هل تريد بأفعل اختيار هاذ العنوان كأفتراضي لك للطلب من المتاجر ؟ ",-1)),t("div",Ze,[a(n(y),{class:"add-btn w-50",style:{"border-radius":"12px"},type:"button",label:"نعم",onClick:Q,loading:n(s).loadingUpdate},null,8,["loading"]),a(n(y),{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:e[12]||(e[12]=o=>g.value=!1)})])]),_:1,__:[26,27]},8,["visible"])]),a(le)],64)}}},ht=h(et,[["__scopeId","data-v-1aca49ae"]]);export{ht as default};
