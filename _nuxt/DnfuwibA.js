import A from"./D3z-2-VN.js";import{Y as O,Z as S,e as M,$ as I,a0 as V,a1 as $,c as z,a2 as E,_ as P,r as s,X as L,g as j,o as D,w as C,a as o,b,d as w,t as h}from"./B8bw-qgz.js";const F=Symbol.for("nuxt:client-only"),H=O({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(v,{slots:r,attrs:c}){const d=S(!1);M(()=>{d.value=!0});const u=I();return u&&(u._nuxtClientOnly=!0),E(F,!0),()=>{var f;if(d.value){const i=(f=r.default)==null?void 0:f.call(r);return i&&i.length===1?[V(i[0],c)]:i}const p=r.fallback||r.placeholder;if(p)return $(p);const g=v.fallback||v.placeholder||"",m=v.fallbackTag||v.placeholderTag||"span";return z(m,c,g)}}}),K={class:"flex justify-content-between gap-2 w-full align-items-center pl-4 pr-4 search-map"},R={class:"w-full"},U={class:"w-full flex justify-content-end ml-3"},X={class:"Google-Map"},Y={class:"flex gap-2 pr-3 pl-3"},Z={class:"flex gap-2 pr-3 pl-3"},q={__name:"map",emits:["confirm"],setup(v,{emit:r}){const c=s({lat:14.54,lng:49.13}),d=s(12),u=s({...c.value}),p=s(""),g=s(c.value.lat),m=s(c.value.lng),f=s(null),i=s(""),_=s(""),B=r;function G(){B("confirm",i.value,_.value,g.value,m.value)}function x(n){new google.maps.Geocoder().geocode({location:n},(t,a)=>{if(a==="OK"&&t[0]){p.value=t[0].formatted_address,i.value="",_.value="";for(const l of t[0].address_components)l.types.includes("locality")?i.value=l.long_name:l.types.includes("route")&&(_.value=l.long_name);!_.value&&t[0].address_components.length>0&&(_.value=t[0].address_components[0].long_name)}else p.value="error get name"})}function T(n){const e=n.latLng.lat(),t=n.latLng.lng();g.value=e,m.value=t;const a={lat:e,lng:t};u.value=a,x(a)}function N(){navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{const e=n.coords.latitude,t=n.coords.longitude,a={lat:e,lng:t};c.value=a,u.value=a,g.value=e,m.value=t,d.value=16,f.value=google.maps.Animation.BOUNCE,x(a),setTimeout(()=>{f.value=null},2e3)},n=>{alert("Geolocation failed: "+n.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")}return M(()=>{const n=()=>{if(window.google&&window.google.maps&&window.google.maps.places){const e=document.getElementById("searchBox"),t=new google.maps.places.SearchBox(e);t.addListener("places_changed",()=>{const a=t.getPlaces();if(!a||a.length===0)return;const l=a[0];if(!l.geometry||!l.geometry.location)return;const y=l.geometry.location,k={lat:y.lat(),lng:y.lng()};c.value=k,u.value=k,g.value=k.lat,m.value=k.lng,d.value=16,p.value=l.name})}else setTimeout(n,300)};n()}),(n,e)=>{const t=A,a=L("GMapMarker"),l=L("GMapMap"),y=H;return D(),j(y,null,{default:C(()=>[o("div",null,[o("div",K,[o("div",R,[b(t,{id:"searchBox",class:"w-full",type:"text",placeholder:n.$t("search_for_place")},null,8,["placeholder"])]),o("div",U,[o("button",{onClick:N,class:"get-location-btn"},[w(h(n.$t("locate_location")),1),e[0]||(e[0]=o("i",{class:"pi pi-map-marker"},null,-1))])])]),o("div",X,[b(l,{center:c.value,zoom:d.value,style:{width:"100%",height:"400px"},onClick:T},{default:C(()=>[b(a,{position:u.value,icon:"/image/location.svg",animation:f.value},null,8,["position","animation"])]),_:1},8,["center","zoom"])]),o("div",Y,[e[3]||(e[3]=o("p",null,[o("i",{class:"pi pi-map-marker text-orange-500"})],-1)),o("p",null,h(p.value||"No name"),1),o("p",null,[e[1]||(e[1]=o("strong",null,"Latitude : ",-1)),w(" "+h(g.value),1)]),o("p",null,[e[2]||(e[2]=o("strong",null,"Longitude : ",-1)),w(" "+h(m.value),1)])]),o("div",Z,[o("button",{onClick:G,class:"get-location-btn pr-3 pl-3"},h(n.$t("confirm_address")),1)])])]),_:1})}}},W=P(q,[["__scopeId","data-v-6a8f1b1e"]]);export{W as _};
