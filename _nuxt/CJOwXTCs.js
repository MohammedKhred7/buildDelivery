import{_ as ae,a as ie}from"./DVMkt0j9.js";import de from"./BTUNhnTs.js";import ue from"./Clscm4lu.js";import ve from"./DoECFgHM.js";import ce from"./Bumkql5Y.js";import pe from"./DrbjWj_l.js";import fe from"./CJhDEi4m.js";import{_ as me}from"./BinJoLpg.js";import{_ as be}from"./DBsgijGO.js";import ye from"./B6lV0hW4.js";import ge from"./CJ75tTpB.js";import we from"./CFb7rgTf.js";import{_ as X,m as F,k as le,r as x,c as n,o as r,a as t,b as a,g as Y,h as i,t as _,u as o,F as A,i as J,w as D,d as xe,q as b,J as Se,K as ke,e as Oe,E as De}from"./CqALIQq-.js";import{u as oe}from"./Bj9223aJ.js";import{_ as Ce}from"./pElwMskI.js";import{_ as $e,a as _e}from"./eiKsicWf.js";import{u as Ve}from"./VrH1AKeK.js";import"./DZzzaL7h.js";import"./CBBCeUqQ.js";import"./as8uRvHu.js";import"./CHU8KDBe.js";import"./DxDbTdgb.js";import"./D6fLeLqj.js";import"./DypqVsHU.js";import"./BD18K1CI.js";import"./DblkQdiZ.js";import"./Dfn-7VrU.js";import"./DP7J4dGO.js";import"./BAyx0U7Y.js";import"./DvEo5_-g.js";import"./C0-otQ1q.js";import"./CMLRC_bA.js";import"./BoAeHPyv.js";import"./D6h0L3f_.js";import"./ORw8rJV6.js";const Ue=""+new URL("searchImg.CKSdbY9U.svg",import.meta.url).href,Ie={class:"card p-3 my-3"},je={class:"font-bold orderStatus"},Re={class:"flex row gap-2 order-info"},Pe=["src"],Le={class:"text-center"},Me={class:"flex justify-content-between p-2"},Ne={class:"order-price"},Te={class:"order-details my-3 p-3"},Be={class:"product-amount flex align-items-center justify-content-between"},Ge={class:"font-bold"},qe={class:"product-amount flex align-items-center justify-content-between"},Fe={class:"font-bold"},Ae={class:"order-btns flex gap-2"},ze={key:0,class:"add-product-btn w-100"},Ee={key:1,class:"add-product-btn w-100"},Je={key:4,class:"add-product-btn w-100"},He={key:0},Ke={key:1,class:"spinner"},Qe={class:"flex justify-end gap-2"},We={class:"text-right"},Ye={class:"flex-column flex-wrap justify-center gap-3 py-2 mb-3"},Xe={class:"flex items-center gap-2"},Ze={class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},et={class:"flex items-center gap-2"},tt={key:0,class:"w-full"},lt={class:"flex justify-end gap-2"},ot={key:0},st={key:1,class:"spinner"},rt={class:"text-right"},nt={class:"flex-column flex-wrap justify-center gap-3 py-2 mb-3"},at={class:"flex items-center gap-2"},it={class:"flex items-center gap-2"},dt={class:"flex items-center gap-2"},ut={class:"flex items-center gap-2"},vt={key:0,class:"w-full"},ct={class:"flex justify-end gap-2"},pt={key:0},ft={key:1,class:"spinner"},mt={class:"flex justify-end gap-2"},bt={class:"flex justify-end gap-2"},yt={key:0},gt={key:1,class:"spinner"},wt={class:"flex-column text-right pb-3"},xt={class:"flex justify-end gap-2"},St={key:0},kt={key:1,class:"spinner"},Ot={class:"flex justify-end gap-2"},Dt={key:0},Ct={key:1,class:"spinner"},$t={class:"flex justify-end gap-2"},_t={key:0},Vt={key:1,class:"spinner"},Ut={class:"flex justify-end gap-2"},It={key:0},jt={key:1,class:"spinner"},Rt={__name:"orderCardStatus",props:{order:{type:Object,required:!0}},setup(u){const s=oe(),m=u,N=F(()=>{var d,e;return(d=m.order)!=null&&d.orderDetails?(e=m.order)==null?void 0:e.orderDetails.reduce((q,g)=>q+Number(g.quantity||0),0):0}),S=F(()=>{var d,e;return(d=m.order)!=null&&d.orderDetails?(e=m.order)==null?void 0:e.orderDetails.reduce((q,g)=>q+Number(g.unitPrice||0)*Number(g.quantity||0),0):0}),I=F(()=>{var d,e;return(d=m.order)!=null&&d.orderDetails?(e=m.order)==null?void 0:e.orderDetails.reduce((q,g)=>{const $=(Number(g.unitPrice)||0)*(Number(g.quantity)||0),U=Number(g.discount)||0;return q+$*U/100},0):0}),V=F(()=>{var d,e;return(d=m.order)!=null&&d.orderDetails?S.value-I.value+(((e=m.order)==null?void 0:e.deliveryPrice)||0):0}),C=le(),H=localStorage.getItem("user");C.ProfileUser=JSON.parse(H);const w=C.ProfileUser.role,z={0:"طلب جديد",1:"جاري البحث عن سائق",2:"قيد التنفيذ",3:"قيد التوصيل",4:"بانتظار التسليم",5:"تم إلغاء الطلب",6:"تم التسليم"},T=F(()=>z[m.order.orderStatus]||m.order.orderStatus),v=x([]),y=x(null),c=x(!1),O=x(!1),B=x(!1),G=x(!1),j=x(!1),R=x(!1),P=x(!1),L=x(!1),M=x(!1);async function K(d,e){d==="Driver"?R.value=!0:d==="ServiceProvider"&&(await s.ChnageOrderStatus(e,1),s.isSuccess&&(c.value=!0))}async function E(d,e){d==="ServiceProvider"&&(await s.ChnageOrderStatus(e,5),s.isSuccess&&console.log(s.isSuccess))}async function Q(d){if(await s.ChnageOrderStatus(d,5),s.isSuccess)O.value=!1;else return null}async function W(d){await s.ChnageOrderStatus(d,4),s.isSuccess&&(j.value=!1,s.GetOrders("","","","",C.ProfileUser.id,"",w))}async function k(d){await s.ChnageOrderStatus(d,2),s.isSuccess&&(R.value=!1)}async function se(d){await s.ChnageOrderStatus(d,6),s.isSuccess&&(P.value=!1)}async function re(d){await s.ChnageOrderStatus(d,6),s.isSuccess&&(M.value=!1)}async function ne(d){await s.ChnageOrderStatus(d,3),s.isSuccess&&(L.value=!1,s.GetOrders("","","","",C.ProfileUser.id,"",w))}return(d,e)=>{var h,ee;const q=me,g=be,$=ye,U=ge,Z=we;return r(),n(A,null,[t("div",Ie,[t("h1",je,_(o(T)),1),t("p",null,"رقم الطلب # "+_((ee=(h=u.order.orderDetails)==null?void 0:h[0])==null?void 0:ee.orderID),1),t("div",Re,[(r(!0),n(A,null,J(u.order.orderDetails,(l,f)=>{var p,te;return r(),n("div",{key:f,class:"order-cards p-2 flex-column mb-3"},[(te=(p=l.offer)==null?void 0:p.images)!=null&&te.length?(r(),n("img",{key:0,src:o(s).urlImage+l.offer.images[0],alt:""},null,8,Pe)):i("",!0),t("h3",Le,_(l.productName),1),t("div",Me,[t("span",Ne,_(l.unitPrice)+" ر.ي",1),t("span",null,_(l.quantity)+"x",1)])])}),128))]),t("div",Te,[e[45]||(e[45]=t("h1",{class:"font-bold"},"ملخص الطلب",-1)),t("div",Be,[e[43]||(e[43]=t("p",null,"عدد المنتجات",-1)),t("h1",Ge,_(o(N)),1)]),t("div",qe,[e[44]||(e[44]=t("p",null,"الاجمالي",-1)),t("h1",Fe,_(o(V))+" ر.ي",1)])]),t("div",Ae,[u.order.orderReadyBtn?(r(),n("button",ze,"الطلب جاهز")):i("",!0),u.order.confirmDeliveredBtn?(r(),n("button",Ee,"تاكيد التسليم")):i("",!0),a(q,{class:"edit-product-btn w-100 text-center",to:{path:`/orders/${u.order.id}`,query:{order:encodeURIComponent(JSON.stringify(u.order))}}},{default:D(()=>e[46]||(e[46]=[xe(" عرض تفاصيل الطلب ")])),_:1,__:[46]},8,["to"]),u.order.orderStatus==4&&o(w)==="Client"?(r(),n("button",{key:2,onClick:e[0]||(e[0]=l=>M.value=!0),class:"accept-order-btn w-100"}," تأكيد الأستلام ")):i("",!0),(u.order.orderStatus==0||u.order.orderStatus==1)&&o(w)==="Client"?(r(),n("button",{key:3,onClick:e[1]||(e[1]=l=>O.value=!0),class:"reject-order-btn w-100"}," إلغاء الطلب ")):i("",!0),(u.order.orderStatus==2||u.order.orderStatus==3)&&o(w)=="Client"?(r(),n("button",Je," تتبع الطلب ")):i("",!0),u.order.orderStatus==4&&o(w)==="Driver"?(r(),n("button",{key:5,onClick:e[2]||(e[2]=l=>P.value=!0),class:"accept-order-btn w-100"}," إنهاء التسليم ")):i("",!0),u.order.orderStatus==3&&o(w)=="Driver"?(r(),n("button",{key:6,onClick:e[3]||(e[3]=l=>j.value=!0),class:"add-product-btn w-100"}," تم الوصول ")):i("",!0),u.order.orderStatus==2&&o(w)=="Driver"?(r(),n("button",{key:7,onClick:e[4]||(e[4]=l=>L.value=!0),class:"order-ready-btn w-100"}," الطلب جاهز ")):i("",!0),u.order.orderStatus==0&&o(w)==="ServiceProvider"||u.order.orderStatus==0&&o(w)==="Driver"?(r(),n("button",{key:8,class:"accept-order-btn w-100",onClick:e[5]||(e[5]=l=>{var f,p;return K(o(w),(p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",He,"قبول")),o(s).changeOrderStatueLoading?(r(),n("span",Ke)):i("",!0)])):i("",!0),u.order.orderStatus==0&&o(w)==="ServiceProvider"?(r(),n("button",{key:9,onClick:e[6]||(e[6]=l=>B.value=!0),class:"reject-order-btn w-100"}," رفض ")):i("",!0)])]),a($,{class:"text-center FindDeliveryModel",closable:!1,visible:o(c),"onUpdate:visible":e[8]||(e[8]=l=>b(c)?c.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[47]||(e[47]=t("div",null,[t("img",{src:Ue,alt:""})],-1)),e[48]||(e[48]=t("h1",{class:"text-xl font-bold"},"جاري البحث عن ديلفري",-1)),e[49]||(e[49]=t("p",null,"نحن نعمل على إيجاد أقرب سائق لتوصيل الطلب في أسرع وقت ممكن. يمكنك متابعة حالة الطلب لحظة بلحظة من خلال صفحة التتبع، وسيتم إشعارك فور قبول السائق للطلب وانطلاقه إليك.",-1)),t("div",Qe,[a(g,{class:"follow-order-btn",type:"button",label:"تتبع الطلب",onClick:e[7]||(e[7]=l=>c.value=!1)})])]),_:1,__:[47,48,49]},8,["visible"]),a($,{class:"text-center salesmanRejectOrderModel",closable:!1,visible:o(B),"onUpdate:visible":e[16]||(e[16]=l=>b(B)?B.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[55]||(e[55]=t("h1",{class:"text-xl font-bold"},"سبب رفض الطلب",-1)),e[56]||(e[56]=t("p",null,"برفض الطلب، سيتم إشعار المشتري ولن يتم تنفيذ الطلب. يرجى التأكد قبل المتابعة.",-1)),t("div",We,[e[54]||(e[54]=t("p",{class:"font-bold",style:{color:"#000"}},"يرجى اختيار سبب رفض الطلب*",-1)),t("div",Ye,[t("div",Xe,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[9]||(e[9]=l=>b(v)?v.value=l:null),inputId:"ingredient1",name:"rejectReason",value:"val1"},null,8,["modelValue"]),e[50]||(e[50]=t("label",{for:"ingredient1"}," المنتج غير متوفر حالياً ",-1))]),t("div",Ze,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[10]||(e[10]=l=>b(v)?v.value=l:null),inputId:"ingredient2",name:"rejectReason",value:"val2"},null,8,["modelValue"]),e[51]||(e[51]=t("label",{for:"ingredient2"}," لا يمكن التوصيل إلى موقع المشتري ",-1))]),t("div",he,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[11]||(e[11]=l=>b(v)?v.value=l:null),inputId:"ingredient3",name:"rejectReason",value:"val3"},null,8,["modelValue"]),e[52]||(e[52]=t("label",{for:"ingredient3"}," خطأ في تفاصيل الطلب ",-1))]),t("div",et,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[12]||(e[12]=l=>b(v)?v.value=l:null),inputId:"ingredient4",name:"rejectReason",value:"val4"},null,8,["modelValue"]),e[53]||(e[53]=t("label",{for:"ingredient4"}," أخرى (يرجى التوضيح) ",-1))]),o(v).includes("val4")?(r(),n("div",tt,[a(Z,{id:"rejectReasonNote",autoResize:"",modelValue:o(y),"onUpdate:modelValue":e[13]||(e[13]=l=>b(y)?y.value=l:null),rows:"4",cols:"30",class:"w-full p-2 border rounded",placeholder:"يرجى كتابة سبب الرفض هنا..."},null,8,["modelValue"])])):i("",!0)])]),t("div",lt,[t("button",{class:"reject-order-btn w-100",onClick:e[14]||(e[14]=l=>{var f,p;return E(o(w),(p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",ot,"تأكيد الرفض")),o(s).changeOrderStatueLoading?(r(),n("span",st)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[15]||(e[15]=l=>B.value=!1)})])]),_:1,__:[55,56]},8,["visible"]),a($,{class:"text-center rejectOrderModel",closable:!1,visible:o(O),"onUpdate:visible":e[24]||(e[24]=l=>b(O)?O.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[62]||(e[62]=t("h1",{class:"text-xl font-bold"},"هل أنت متأكد من إلغاء الطلب؟",-1)),e[63]||(e[63]=t("p",null,"عند إلغاء الطلب سيتم حذف جميع المنتجات من السلة ولا يمكن التراجع عن هذه العملية",-1)),t("div",rt,[e[61]||(e[61]=t("p",{class:"font-bold",style:{color:"#000"}},"يرجى اختيار سبب إلغاء الطلب*",-1)),t("div",nt,[t("div",at,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[17]||(e[17]=l=>b(v)?v.value=l:null),inputId:"ingredient1",name:"rejectReason",value:"val1"},null,8,["modelValue"]),e[57]||(e[57]=t("label",{for:"ingredient1"}," تأخر في قبول الطلب",-1))]),t("div",it,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[18]||(e[18]=l=>b(v)?v.value=l:null),inputId:"ingredient2",name:"rejectReason",value:"val2"},null,8,["modelValue"]),e[58]||(e[58]=t("label",{for:"ingredient2"}," مدة التوصيل طويلة",-1))]),t("div",dt,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[19]||(e[19]=l=>b(v)?v.value=l:null),inputId:"ingredient3",name:"rejectReason",value:"val3"},null,8,["modelValue"]),e[59]||(e[59]=t("label",{for:"ingredient3"}," خطأ في تفاصيل الطلب ",-1))]),t("div",ut,[a(U,{modelValue:o(v),"onUpdate:modelValue":e[20]||(e[20]=l=>b(v)?v.value=l:null),inputId:"ingredient4",name:"rejectReason",value:"val4"},null,8,["modelValue"]),e[60]||(e[60]=t("label",{for:"ingredient4"}," أخرى (يرجى التوضيح) ",-1))]),o(v).includes("val4")?(r(),n("div",vt,[a(Z,{id:"rejectReasonNote",autoResize:"",modelValue:o(y),"onUpdate:modelValue":e[21]||(e[21]=l=>b(y)?y.value=l:null),rows:"4",cols:"30",class:"w-full p-2 border rounded",placeholder:"يرجى كتابة سبب الرفض هنا..."},null,8,["modelValue"])])):i("",!0)])]),t("div",ct,[t("button",{class:"delete-btn w-100",type:"button",label:"تاكيد الإلغاء",onClick:e[22]||(e[22]=l=>{var f,p;return Q((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",pt,"تاكيد الالغاء")),o(s).changeOrderStatueLoading?(r(),n("span",ft)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[23]||(e[23]=l=>O.value=!1)})])]),_:1,__:[62,63]},8,["visible"]),a($,{class:"text-center sendOrderModel",closable:!1,visible:o(G),"onUpdate:visible":e[27]||(e[27]=l=>b(G)?G.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[64]||(e[64]=t("h1",{class:"text-xl font-bold"},"هل أنت متأكد من تسليم الطلب للسائق؟",-1)),e[65]||(e[65]=t("p",null,"بمجرد تأكيد التسليم، سيتم تحديث حالة الطلب، ولن تتمكن من التراجع. يرجى التأكد من تسليم الطلب فعليًا إلى السائق قبل المتابعة.",-1)),t("div",mt,[a(g,{class:"accept-order-btn w-100",type:"button",label:"تاكيد التسليم",onClick:e[25]||(e[25]=l=>G.value=!1)}),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[26]||(e[26]=l=>G.value=!1)})])]),_:1,__:[64,65]},8,["visible"]),u.order.orderStatus==3&&o(w)=="Driver"?(r(),Y($,{key:0,class:"text-center arrivedLocation",closable:!1,visible:o(j),"onUpdate:visible":e[30]||(e[30]=l=>b(j)?j.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[66]||(e[66]=t("h1",{class:"text-xl font-bold"},"هل فعلا وصلت الى موقع العميل ؟",-1)),e[67]||(e[67]=t("p",null,"تأكد انك وصلت الى موقع العميل عند الضفط على تأكيد سيتم ارسال اشعار للعميل انك وصلت",-1)),t("div",bt,[t("button",{class:"accept-order-btn w-100",onClick:e[28]||(e[28]=l=>{var f,p;return W((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",yt," نعم متأكد ")),o(s).changeOrderStatueLoading?(r(),n("span",gt)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[29]||(e[29]=l=>j.value=!1)})])]),_:1,__:[66,67]},8,["visible"])):i("",!0),a($,{class:"text-center acceptOrderModel",closable:!1,visible:o(R),"onUpdate:visible":e[33]||(e[33]=l=>b(R)?R.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[69]||(e[69]=t("h1",{class:"text-xl font-bold"},"هل تريد قبول الطلب",-1)),e[70]||(e[70]=t("p",null,"نحن نعمل على ايجاداقرب سائق لتوصيل الطلب في اسرع وقت ممكن.",-1)),t("div",wt,[e[68]||(e[68]=t("p",{class:"font-bold"},"تفاصيل الطلب : ",-1)),t("span",null,"من : "+_(d.هنا),1),t("span",null,"إلى : "+_(d.هناك),1)]),t("div",xt,[t("button",{class:"accept-order-btn w-100",onClick:e[31]||(e[31]=l=>{var f,p;return k((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",St," قبول ")),o(s).changeOrderStatueLoading?(r(),n("span",kt)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[32]||(e[32]=l=>R.value=!1)})])]),_:1,__:[69,70]},8,["visible"]),a($,{class:"text-center paidModel",closable:!1,visible:o(P),"onUpdate:visible":e[36]||(e[36]=l=>b(P)?P.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[71]||(e[71]=t("h1",{class:"text-xl font-bold"},"تأكيد تسليم الطلب للعميل",-1)),e[72]||(e[72]=t("p",null,"هل انت متاكد من تسليم الطلب للعميل ؟",-1)),t("div",Ot,[t("button",{class:"accept-order-btn w-100",onClick:e[34]||(e[34]=l=>{var f,p;return se((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",Dt," نعم تأكيد ")),o(s).changeOrderStatueLoading?(r(),n("span",Ct)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[35]||(e[35]=l=>P.value=!1)})])]),_:1,__:[71,72]},8,["visible"]),a($,{class:"text-center orderReadyModel",closable:!1,visible:o(L),"onUpdate:visible":e[39]||(e[39]=l=>b(L)?L.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[73]||(e[73]=t("h1",{class:"text-xl font-bold"},"هل الطلب جاهز فعلاً ؟",-1)),e[74]||(e[74]=t("p",null,"تأكد ان الطلب جاهز, سيتم ارسال اشعار للعميل بأن الطلب جاهز وهو في الطريق إليه",-1)),t("div",$t,[t("button",{class:"accept-order-btn w-100",onClick:e[37]||(e[37]=l=>{var f,p;return ne((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",_t," الطلب جاهز ")),o(s).changeOrderStatueLoading?(r(),n("span",Vt)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[38]||(e[38]=l=>L.value=!1)})])]),_:1,__:[73,74]},8,["visible"]),a($,{class:"text-center orderCompletedModel",closable:!1,visible:o(M),"onUpdate:visible":e[42]||(e[42]=l=>b(M)?M.value=l:null),modal:"",style:{width:"25rem"}},{default:D(()=>[e[75]||(e[75]=t("h1",{class:"text-xl font-bold"},"تأكيد استلام الطلب",-1)),e[76]||(e[76]=t("p",null,"هل انت متاكد من استلام الطلب من السائق ؟",-1)),t("div",Ut,[t("button",{class:"accept-order-btn w-100",onClick:e[40]||(e[40]=l=>{var f,p;return re((p=(f=u.order.orderDetails)==null?void 0:f[0])==null?void 0:p.orderID)})},[o(s).changeOrderStatueLoading?i("",!0):(r(),n("span",It," نعم متأكد ")),o(s).changeOrderStatueLoading?(r(),n("span",jt)):i("",!0)]),a(g,{class:"cancel-btn w-50",type:"button",label:"تراجع",onClick:e[41]||(e[41]=l=>M.value=!1)})])]),_:1,__:[75,76]},8,["visible"])],64)}}},Pt=X(Rt,[["__scopeId","data-v-7646436f"]]),Lt=""+new URL("noOrder.H6xsM1Af.svg",import.meta.url).href,Mt={class:"px-4 py-4 card text-center"},Nt={__name:"noResultOrders",props:["mainTitle","description"],setup(u){const s=u;return(m,N)=>(r(),n("div",Mt,[N[0]||(N[0]=t("img",{src:Lt,alt:""},null,-1)),t("h1",null,_(s.mainTitle),1),t("p",null,_(s.description),1)]))}},Tt=X(Nt,[["__scopeId","data-v-d1718d0a"]]),Bt={id:"up"},Gt={class:"pr-6 pl-6 mb-4"},qt={class:"search w-full"},Ft={key:0,class:"flex gap-4 pr-6 pl-6 mt-3"},At={key:1,class:"w-full my-5"},zt={key:2,class:"space-y-4"},Et={key:1,class:"row gap-4"},Jt={key:3},Ht={key:4},Kt={__name:"index",setup(u){Ve({title:"الطلبات"});const s=le(),m=oe(),{Orders:N}=Se(m),S=x(null),I=x([]),V=x(0),C=x(null);ke(V,async y=>{var c;C.value=(c=I.value[y])==null?void 0:c.value,S.value==="Client"?C.value==1?await m.GetOrders("","",s.ProfileUser.id,"","","",S.value,!0):await m.GetOrders("",C.value,s.ProfileUser.id,"","","",S.value,!1):S.value==="ServiceProvider"?await m.GetOrders("",C.value,"","","",s.ProfileUser.IdStore,S.value):S.value==="Driver"&&await m.GetOrders("",C.value,"","",s.ProfileUser.id,"",S.value)});const H=F(()=>I.value.map((y,c)=>({label:y.title,value:c}))),w=x(!1),z=()=>{w.value=window.innerWidth<640};Oe(async()=>{var c;z(),window.addEventListener("resize",z);const y=localStorage.getItem("user");y&&(s.ProfileUser=JSON.parse(y),S.value=s.ProfileUser.role,S.value==="ServiceProvider"?(I.value=[{title:"جديد",value:"0"},{title:"الحالية",value:""},{title:"الملغية",value:"5"},{title:"المكتملة",value:"6"}],await m.GetOrders("",0,"","","",s.ProfileUser.IdStore)):S.value==="Driver"?(I.value=[{title:"جديد",value:"0"},{title:"الحالية",value:""},{title:"المكتملة",value:"6"}],await m.GetOrders("",0,"","",s.ProfileUser.id)):S.value==="Client"&&(I.value=[{title:"كل الطلبات",value:""},{title:"الحالية",value:"1"},{title:"الملغية",value:"5"},{title:"المكتملة",value:"6"}],await m.GetOrders("",null,s.ProfileUser.id))),C.value=(c=I.value[V.value])==null?void 0:c.value}),De(()=>{window.removeEventListener("resize",z)});const T=x(""),v=F(()=>{if(!T.value)return N.value;const y=T.value.trim().toLowerCase();return N.value.filter(c=>c.orderDetails&&c.orderDetails.some(O=>O.orderID&&O.orderID.toString().includes(y))||c.orderDetails&&c.orderDetails.some(O=>O.productName&&O.productName.toLowerCase().includes(y)))});return(y,c)=>{const O=ae,B=de,G=ue,j=ve,R=ce,P=pe,L=fe,M=Pt,K=Ce,E=Tt,Q=ie,W=$e;return r(),n(A,null,[t("div",Bt,[a(O),t("div",Gt,[c[4]||(c[4]=t("h1",{class:"title"},"الطلبات",-1)),t("div",qt,[a(j,{class:"w-full"},{default:D(()=>[a(B,{class:"pi pi-search"}),a(G,{class:"search",modelValue:o(T),"onUpdate:modelValue":c[0]||(c[0]=k=>b(T)?T.value=k:null),placeholder:"ابحث برقم او أسم الطلب ..."},null,8,["modelValue"])]),_:1})]),o(w)?(r(),n("div",At,[a(L,{modelValue:o(V),"onUpdate:modelValue":c[2]||(c[2]=k=>b(V)?V.value=k:null),options:o(H),"option-label":"label","option-value":"value",placeholder:"اختر القسم",class:"w-full mt-2"},null,8,["modelValue","options"])])):(r(),n("div",Ft,[a(P,{class:"w-full",activeIndex:o(V),"onUpdate:activeIndex":c[1]||(c[1]=k=>b(V)?V.value=k:null)},{default:D(()=>[(r(!0),n(A,null,J(o(I),k=>(r(),Y(R,{class:"w-full",key:k.title,header:k.title},null,8,["header"]))),128))]),_:1},8,["activeIndex"])])),o(v).length>0||o(m).loadingStore?(r(),n("div",zt,[o(m).loadingStore?i("",!0):(r(!0),n(A,{key:0},J(o(v),k=>(r(),Y(M,{key:k.orderID,order:k},null,8,["order"]))),128)),o(m).loadingStore?(r(),n("div",Et,[(r(),n(A,null,J(3,k=>a(K,{class:"col-3",type:"card"})),64))])):i("",!0)])):o(S)==="ServiceProvider"?(r(),n("div",Jt,[a(E,{mainTitle:"لم تستقبل أي طلبات حتى الآن",description:"بمجرد استلام طلب جديد من أحد العملاء، سيظهر هنا لتتمكن من متابعته بكل سهولة."})])):o(S)=="Driver"?(r(),n("div",Ht,[a(E,{mainTitle:"لم تستقبل أي طلبات حتى الآن",description:"بمجرد وجود طلب جديد الى اي متجر سيظهر هنا لتتمكن من الحصول عليه لتوصيله بكل سهولة, كما انك ستحصل على اشعار بوجود طلب جديد"})])):i("",!0)]),a(Q)]),a(W,{onClicked:c[3]||(c[3]=k=>("scrollTo"in y?y.scrollTo:o(_e))("up"))})],64)}}},Ul=X(Kt,[["__scopeId","data-v-661e9e04"]]);export{Ul as default};
