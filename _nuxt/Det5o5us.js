import X from"./DQUjcVE-.js";import Y from"./PI6MLwoI.js";import Z from"./fBfjMOBd.js";import D from"./CK0qKBwI.js";import{_ as I}from"./CZ-5xftb.js";import B from"./C5lSkYZF.js";import{_ as tt,k as et,f as lt,r as C,m as st,x as ot,e as nt,y as at,W as it,c as p,o as u,b as r,w as c,g as A,h as f,u as l,a as e,n as S,d as b,q as rt,F as ut}from"./BoVHPEzE.js";import dt from"./BmpJmRTe.js";import V from"./BP9rBN3L.js";import{u as pt}from"./DOtJ_FjZ.js";import{u as J}from"./C1NWOu8L.js";const F=""+new URL("productReadyIcon.Df4PBi80.svg",import.meta.url).href,ct={class:"card surface-ground p-5 flex justify-content-center"},ft={class:"flex flex-column"},mt={class:"slide-form p-4"},gt={class:""},vt={class:"flex-column gap-2 mb-4"},xt={class:"flex-column gap-2 mb-4"},bt={class:"flex-column gap-2 mb-4"},wt={class:"flex pt-4 justify-content-end"},yt=["onClick"],Ct={class:"flex flex-column"},Vt={class:"slide-form p-4 pb-1"},_t={key:0,class:"file-dev p-4 bg-white flex justify-content-center align-items-center",style:{height:"170px"}},kt={key:1,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},St=["src"],Ut={class:"slide-form p-4 pt-0"},jt={key:0,class:"file-dev p-4 bg-white flex justify-content-center align-items-center mb-2",style:{height:"170px"}},ht={key:1,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},Pt=["src"],$t={key:2,class:"file-dev p-4 bg-white flex justify-content-center align-items-center",style:{height:"170px"}},Ot={key:3,class:"file-dev bg-white p-2 mt-4 text-center flex align-items-center justify-content-center gap-4"},Rt=["src"],Nt={class:"tow-buttons flex pt-4 justify-content-between gap-4"},zt=["onClick"],At=["onClick"],Jt={class:"flex flex-column"},Ft={class:"py-4"},Gt={class:"flex-column gap-2 mb-4"},Lt={class:"flex justify-content-start w-25 mb-3"},Tt={key:0},Et={class:"flex-column gap-2 mb-4"},Kt={class:"flex-column gap-2 mb-4"},Mt={class:"flex-column gap-2 mb-4"},qt={class:"flex w-25 mb-3",style:{float:"left"}},Wt={class:"flex justify-content-center gap-2"},Ht={class:"flex tow-buttons pt-4 justify-content-between gap-4"},Qt=["onClick"],Xt=["onClick"],Yt={key:1,class:"spinner"},Zt={class:"flex flex-column"},Dt={class:"text-center"},It={class:"flex flex-column"},Bt={class:"text-center"},te={__name:"addProductModel",props:["updateProduct"],setup(G){const h=pt(),w=et(),P=lt(),_=J(),k=G,L=at(),o=C({serviceProviderID:null,storeId:null,categoryId:null,title:"",description:"",discountValue:null,price:null,startDate:null,endDate:null,imagesIdsSerialized:[],images:[]}),n=C([{img:null,url:null,id:null},{img:null,url:null,id:null},{img:null,url:null,id:null}]),$=st(()=>v.value?!!o.value.startDate&&!!o.value.endDate&&!!o.value.price&&!!o.value.discountValue:!!o.value.price);function T(){x.value=!1,o.value.discountValue=null,o.value.startDate=null,o.value.endDate=null,v.value=!1}const E=async()=>{const s=[];for(const t of n.value)if(t!=null&&t.id){const i=t==null?void 0:t.id;s.push(i)}else if(t.img){const i=await w.upladFiles(t.img);s.push(i)}o.value.imagesIdsSerialized=JSON.stringify(s),o.value.images=s};function O(s){const t=String.fromCharCode(s.keyCode);/[0-9]/.test(t)||s.preventDefault()}function U(s,t){const i=s.target.files[0];if(n.value[t].img=s.target.files[0],i&&i.size<=2*1024*1024){const m=new FileReader;m.onload=y=>{n.value[t].url=y.target.result},m.readAsDataURL(i)}else alert("الرجاء اختيار صورة أقل من 2 ميغابايت")}const K=ot(),M=J();nt(async()=>{var t,i;h.GetAllCategories();const s=localStorage.getItem("user");if(s?(w.ProfileUser=JSON.parse(s),o.value.serviceProviderID=(t=w.ProfileUser)==null?void 0:t.id,o.value.storeId=(i=w.ProfileUser)==null?void 0:i.IdStore):w.ProfileUser={},k.updateProduct){const m=K.params.id;if(m){let y=await M.GetOfferById(m);await q(y)}}});async function q(s){o.value.title=s==null?void 0:s.title,o.value.description=s==null?void 0:s.description,o.value.discountValue=s==null?void 0:s.discountValue,o.value.price=s==null?void 0:s.price,o.value.endDate=s==null?void 0:s.endDate,o.value.startDate=s==null?void 0:s.startDate,o.value.categoryId=s==null?void 0:s.categoryId,o.value.id=s==null?void 0:s.id,s!=null&&s.images&&s.images.forEach((t,i)=>{n.value[i]&&(n.value[i].url=L.public.urlImage+t,n.value[i].id=t)})}const j=C(!1);async function W(){j.value=!0;try{await E(),k.updateProduct?await _.PutCreateOffer(o.value):await _.PostCreateOffer(o.value)}catch{}finally{j.value=!1}}const H=()=>{v.value=!v.value},v=C(!1),x=C(!1);return(s,t)=>{const i=X,m=Y,y=Z,R=it("SwiperSlide"),N=D,z=I,Q=B;return u(),p("div",ct,[r(l(dt),{linear:"",readonly:!0},{default:c(()=>[r(l(V),{class:"surface-ground",dir:"ltr",header:"معلومات المنتج"},{content:c(({nextCallback:g})=>[e("div",ft,[r(R,null,{default:c(()=>[e("div",mt,[e("div",gt,[e("div",vt,[t[18]||(t[18]=e("label",{for:"productName"},"اسم المنتج *",-1)),r(i,{id:"productName",modelValue:l(o).title,"onUpdate:modelValue":t[0]||(t[0]=d=>l(o).title=d),placeholder:"ادخل اسم المنتج"},null,8,["modelValue"])]),e("div",xt,[t[19]||(t[19]=e("label",{for:"arew"},"التصنيف *",-1)),r(m,{id:"arew",modelValue:l(o).categoryId,"onUpdate:modelValue":t[1]||(t[1]=d=>l(o).categoryId=d),options:l(h).allCategories,optionLabel:"name",placeholder:"حدد تصنيف المنتج",class:"w-full",optionValue:"id"},null,8,["modelValue","options"])]),e("div",bt,[t[20]||(t[20]=e("label",{for:"area"},"وصف المنتج (اختياري)",-1)),r(y,{id:"area",modelValue:l(o).description,"onUpdate:modelValue":t[2]||(t[2]=d=>l(o).description=d),autoResize:"",rows:"6",cols:"30",placeholder:"الوصف"},null,8,["modelValue"])])])])]),_:1})]),e("div",wt,[e("button",{onClick:d=>l(o).categoryId&&l(o).title?g():null,class:S(l(o).categoryId&&l(o).title?" w-100 add-product-btn":"disabled w-100 add-product-btn")},t[21]||(t[21]=[b("التالي "),e("i",{class:"pi pi-arrow-circle-left"},null,-1)]),10,yt)])]),_:1}),r(l(V),{header:"صورة المنتج"},{content:c(({prevCallback:g,nextCallback:d})=>[e("div",Ct,[r(R,null,{default:c(()=>[e("div",Vt,[t[24]||(t[24]=e("h3",{class:"mb-2"},"ارفاق صور المنتج *",-1)),l(n)[0].url?f("",!0):(u(),p("div",_t,[e("input",{id:"fileUpload",type:"file",onChange:t[3]||(t[3]=a=>U(a,0)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),t[22]||(t[22]=e("label",{for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},[e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}}),e("span",{class:"mt-2"},"انقر هنا لرفع الصور"),e("span",{class:"text-sm text-gray-500 mt-1"},"صيغ الملفات المدعومة : Jpg , png"),e("span",{class:"text-sm text-gray-500 mt-1"},"أقصى حجم للملف 2 م.ب"),e("span",{class:"text-sm text-gray-500 mt-1"},"أبعاد الصورة بعرض 800 وطول 470 بكسل")],-1))])),l(n)[0].url?(u(),p("div",kt,[e("img",{src:l(n)[0].url,alt:"الشعار المرفوع",style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,St),e("button",{class:"btn-remove",onClick:t[4]||(t[4]=a=>(l(n)[0].url=null,l(n)[0].img=null,l(n)[0].id=null))},t[23]||(t[23]=[e("i",{class:"pi pi-trash"},null,-1)]))])):f("",!0)]),e("div",Ut,[t[29]||(t[29]=e("h3",{class:"mb-2"},"يمكنك إضافة صورة أو أكثر",-1)),l(n)[1].url?f("",!0):(u(),p("div",jt,[e("input",{id:"fileUpload",type:"file",onChange:t[5]||(t[5]=a=>U(a,1)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),t[25]||(t[25]=e("label",{for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},[e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}}),e("span",{class:"mt-2"},"انقر هنا لرفع الصور"),e("span",{class:"text-sm text-gray-500 mt-1"},"صيغ الملفات المدعومة : Jpg , png"),e("span",{class:"text-sm text-gray-500 mt-1"},"أقصى حجم للملف 2 م.ب"),e("span",{class:"text-sm text-gray-500 mt-1"},"أبعاد الصورة بعرض 800 وطول 470 بكسل")],-1))])),l(n)[1].url?(u(),p("div",ht,[e("img",{src:l(n)[1].url,alt:"الشعار المرفوع",style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,Pt),e("button",{class:"btn-remove",onClick:t[6]||(t[6]=a=>(l(n)[1].url=null,l(n)[1].img=null,l(n)[1].id=null))},t[26]||(t[26]=[e("i",{class:"pi pi-trash"},null,-1)]))])):f("",!0),l(n)[2].url?f("",!0):(u(),p("div",$t,[e("input",{id:"fileUpload",type:"file",onChange:t[7]||(t[7]=a=>U(a,2)),accept:".jpg,.jpeg,.png",class:"hidden"},null,32),t[27]||(t[27]=e("label",{for:"fileUpload",class:"flex flex-column text-center gap-1 cursor-pointer"},[e("i",{class:"pi pi-upload",style:{"font-size":"2rem"}}),e("span",{class:"mt-2"},"انقر هنا لرفع الصور"),e("span",{class:"text-sm text-gray-500 mt-1"},"صيغ الملفات المدعومة : Jpg , png"),e("span",{class:"text-sm text-gray-500 mt-1"},"أقصى حجم للملف 2 م.ب"),e("span",{class:"text-sm text-gray-500 mt-1"},"أبعاد الصورة بعرض 800 وطول 470 بكسل")],-1))])),l(n)[2].url?(u(),p("div",Ot,[e("img",{src:l(n)[2].url,alt:"الشعار المرفوع",style:{"max-height":"150px","max-width":"100%","border-radius":"8px"}},null,8,Rt),e("button",{class:"btn-remove",onClick:t[8]||(t[8]=a=>(l(n)[2].url=null,l(n)[2].img=null,l(n)[2].id=null))},t[28]||(t[28]=[e("i",{class:"pi pi-trash"},null,-1)]))])):f("",!0)])]),_:1})]),e("div",Nt,[e("button",{onClick:g,class:"w-100 prev-btn"},t[30]||(t[30]=[e("i",{class:"pi pi-arrow-circle-right"},null,-1),b(" السابق ")]),8,zt),e("button",{onClick:a=>l(n)[0].url?d():null,class:S(l(n)[0].url?"w-100 add-product-btn":" disabled w-100 add-product-btn")},t[31]||(t[31]=[b("التالي "),e("i",{class:"pi pi-arrow-circle-left"},null,-1)]),10,At)])]),_:1}),r(l(V),{header:"السعر والعروض"},{content:c(({prevCallback:g,nextCallback:d})=>[e("div",Jt,[e("div",Ft,[e("div",Gt,[t[32]||(t[32]=e("label",{for:"price"},"سعر المنتج *",-1)),r(i,{id:"price",onKeypress:O,inputId:"integeronly",modelValue:l(o).price,"onUpdate:modelValue":t[9]||(t[9]=a=>l(o).price=a),placeholder:"ادخل سعر المنتج"},null,8,["modelValue"])]),e("div",Lt,[e("button",{onClick:H,class:"w-100 add-offer-btn gap-2 align-items-center flex justify-content-center"},[t[33]||(t[33]=b("اضافة عرض ")),e("i",{class:S(l(v)?"pi pi-minus":"pi pi-plus")},null,2)])]),l(v)?(u(),p("div",Tt,[e("div",Et,[t[34]||(t[34]=e("label",{for:"discountValue"},"نسية الخصم *",-1)),r(i,{id:"discountValue",onKeypress:O,inputId:"integeronly",modelValue:l(o).discountValue,"onUpdate:modelValue":t[10]||(t[10]=a=>l(o).discountValue=a),placeholder:"ادخل نسبة الخصم %"},null,8,["modelValue"])]),e("div",Kt,[t[35]||(t[35]=e("label",{for:"startDate"}," تاريخ البدء ",-1)),r(N,{modelValue:l(o).startDate,"onUpdate:modelValue":t[11]||(t[11]=a=>l(o).startDate=a),showIcon:"",iconDisplay:"input",inputId:"startDate",placeholder:"ادخل تاريخ بداية العرض"},null,8,["modelValue"])]),e("div",Mt,[t[36]||(t[36]=e("label",{for:"endDate"}," تاريخ الانتهاء ",-1)),r(N,{modelValue:l(o).endDate,"onUpdate:modelValue":t[12]||(t[12]=a=>l(o).endDate=a),showIcon:"",iconDisplay:"input",inputId:"endDate",placeholder:"ادخل تاريخ نهاية العرض"},null,8,["modelValue"])]),e("div",qt,[e("button",{onClick:t[13]||(t[13]=a=>x.value=!0),class:"w-100 delete-offer-btn"},t[37]||(t[37]=[b("حذف العرض "),e("i",{class:"pi pi-trash"},null,-1)]))]),r(Q,{visible:l(x),"onUpdate:visible":t[15]||(t[15]=a=>rt(x)?x.value=a:null),modal:"",style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:c(()=>[t[38]||(t[38]=e("h1",{class:"font-bold delete-title text-enter"},"حذف العرض",-1)),t[39]||(t[39]=e("p",{class:"p-text-secondary"},"هل أنت متأكد من حذف العرض ؟",-1)),e("div",Wt,[r(z,{class:"delete-btn w-50",type:"button",label:"نعم",severity:"secondary",onClick:T}),r(z,{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:t[14]||(t[14]=a=>x.value=!1)})])]),_:1,__:[38,39]},8,["visible"])])):f("",!0)])]),e("div",Ht,[e("button",{onClick:g,class:"w-100 prev-btn"},t[40]||(t[40]=[e("i",{class:"pi pi-arrow-circle-right"},null,-1),b(" السابق ")]),8,Qt),e("button",{onClick:async()=>{l($)&&(await W(),l(_).sucsses&&d()),l(_).sucsses=!1},class:S(l($)?" w-100 add-product-btn":" disabled w-100 add-product-btn")},[l(j)?(u(),p("span",Yt)):(u(),p(ut,{key:0},[t[41]||(t[41]=e("span",null,"التالي",-1)),t[42]||(t[42]=e("i",{class:"pi pi-arrow-circle-left"},null,-1))],64))],10,Xt)])]),_:1}),k.updateProduct?f("",!0):(u(),A(l(V),{key:0,header:"تم الحفظ بنجاح"},{default:c(()=>[e("div",Zt,[e("div",Dt,[t[43]||(t[43]=e("img",{src:F,alt:""},null,-1)),t[44]||(t[44]=e("div",{class:"font-bold"},[e("p",null,"منتجك جاهز الآن !"),e("p",null,"بإمكانك تعديل تفاصيل المنتج في أي وقت، وتتحكم في ظهوره داخل المتجر أو إخفائه متى ما احتجت.")],-1)),e("button",{onClick:t[16]||(t[16]=g=>l(P).push("/store")),class:"w-100 add-product-btn"},"عرض المنتج ")])])]),_:1})),k.updateProduct?(u(),A(l(V),{key:1,header:"تم تعديل بنجاح"},{default:c(()=>[e("div",It,[e("div",Bt,[t[45]||(t[45]=e("img",{src:F,alt:""},null,-1)),t[46]||(t[46]=e("div",{class:"font-bold"},[e("p",null," تم تعديل منتجك بنجاح !"),e("p",null,"بإمكانك عرض تفاصيل المنتج في أي وقت، وتتحكم في ظهوره داخل المتجر أو إخفائه متى ما احتجت.")],-1)),e("button",{onClick:t[17]||(t[17]=g=>l(P).push("/store")),class:"w-100 add-product-btn"},"عرض المنتج ")])])]),_:1})):f("",!0)]),_:1})])}}},ce=tt(te,[["__scopeId","data-v-a3d1dc91"]]);export{ce as _};
