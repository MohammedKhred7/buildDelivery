import{_ as oe,a as ae}from"./CrNvm3DK.js";import ie from"./BnyXxnej.js";import de from"./D3z-2-VN.js";import re from"./pl2LcV2n.js";import ue from"./F-oyqQTZ.js";import{s as y}from"./DDyLTzb0.js";import{_ as G,j as pe,c as _,o as m,a as t,t as A,b as a,u as n,h as F,d as B,m as ce,r as d,k as P,e as fe,x as me,L as H,H as ve,w as f,s as k,F as M,i as T,g as _e,n as be}from"./B8bw-qgz.js";import{_ as xe}from"./CuAYuAcm.js";import ge from"./DYNzTrsO.js";import{_ as ye}from"./DnfuwibA.js";import we from"./DOnK2t2o.js";import{u as De}from"./BVGFqH36.js";import{u as $e}from"./DSOkz2e5.js";import"./BDufnC7Z.js";import"./Cj21L3Vi.js";import"./CdANXqyF.js";import"./DDjvz5j0.js";import"./CElyrDPd.js";import"./BAjhaC56.js";import"./DAkP3l9d.js";import"./Dwnst9H8.js";import"./B9ixgvoB.js";import"./CguioKPc.js";import"./Dx7OPG78.js";import"./Cy8lMCAr.js";import"./C7GAp4r8.js";import"./D_nHn-NJ.js";import"./COyAXlhX.js";import"./D89hGFUH.js";import"./Dz-7mMxJ.js";import"./tnWtlJkU.js";import"./DKS4LJ3o.js";import"./CG77IQb3.js";import"./BqAhhW5w.js";import"./BawmCFSI.js";const ke={class:"card p-3 mb-4"},Ae={class:"heading flex align-items-center justify-content-between"},Ce={class:"title font-bold"},Le={class:"buttons flex gap-2 p-2"},Ve={class:"full-address flex gap-2 justify-content-between mt-2"},Ie={key:0,class:"notChoosen"},Se={key:1,class:"choosen"},Ue={__name:"addressCard",props:["Address","id","index"],setup(C){const s=C,{t:L}=pe();return(r,u)=>{var w,x,p,c,v;return m(),_("div",null,[t("div",ke,[t("div",Ae,[t("div",Ce,A((w=s.Address)==null?void 0:w.description),1),t("div",Le,[a(n(y),{icon:"pi pi-trash",onClick:u[0]||(u[0]=I=>r.$emit("deleteAddress",s.id,s.index))}),a(n(y),{icon:"pi pi-pen-to-square",onClick:u[1]||(u[1]=I=>r.$emit("editAddress",s.id,s.index))})])]),t("div",Ve,[t("p",null,A(((x=s.Address)==null?void 0:x.city)+" - "+((p=s.Address)==null?void 0:p.addressLine)),1),t("div",{class:"defaultAddress font-bold py-2 px-3 align-items-center flex",onClick:u[2]||(u[2]=I=>r.$emit("clickDefault",s.id,s.index))},[(c=s.Address)!=null&&c.isDefault?F("",!0):(m(),_("span",Ie,A(r.$t("select_default_address")),1)),(v=s.Address)!=null&&v.isDefault?(m(),_("span",Se,[B(A(r.$t("default_address"))+" ",1),u[3]||(u[3]=t("i",{class:"pi pi-check-circle pr-2"},null,-1))])):F("",!0)])])])])}}},je=G(Ue,[["__scopeId","data-v-87010ec5"]]),Me=""+new URL("noAdress.BBftCfd3.svg",import.meta.url).href,Be={},he={class:"px-4 py-4 card text-center"};function Ee(C,s){return m(),_("div",he,[s[0]||(s[0]=t("img",{src:Me,alt:""},null,-1)),t("h1",null,A(C.$t("no_address_addedd")),1),t("p",null,A(C.$t("add_delivery_location")),1)])}const Ge=G(Be,[["render",Ee],["__scopeId","data-v-99813145"]]),Ne={class:"mb-6"},Re={class:"pr-6 pl-6","data-aos":"fade-up"},Fe={class:"flex align-items-center justify-content-between"},Pe={class:"flex justify-content-between mb-2"},He={class:"mt-4 search","data-aos":"fade-up"},Te={"data-aos":"fade-up",class:"flex gap-2 align-items-center text-gray-600 font-medium white-space-nowrap mr-2 ml-2"},qe={class:"row gap-4"},Oe={class:"flex flex-column"},ze={class:"flex gap-3"},Je={class:"flex-column w-100 gap-2 mb-4"},Ke={class:"flex-column w-100 gap-2 mb-4"},Qe={class:"flex gap-3"},We={class:"flex-column w-100 gap-2 mb-4"},Xe={class:"buttons flex gap-3 mt-4"},Ye={key:1,class:"spinner"},Ze={class:"flex justify-content-center gap-2"},et={class:"flex justify-content-center gap-2"},tt={__name:"index",setup(C){De({title:"العناوين"});const s=ce();$e();const L=d(""),r=d(!1),u=P(()=>{const l=L.value.trim().toLowerCase();return s.locationData.filter(e=>{const b=!l||e.description.toLowerCase().includes(l),V=!r.value||e.isDefault===!0;return b&&V})});fe(async()=>{await s.GetLocationPaged();const l=localStorage.getItem("user")||null;if(l){let e=JSON.parse(l);i.value.userID=e.id}});const{errorMessage:w,success:x}=me(),p=d(!1),c=d(!1),v=d(!1);async function I(){D.value&&(await s.DeleteLocation(D.value),s.locationData.splice($.value,1),s.sucsses?x("تم حذف العنوان بنجاح"):w("مشكلة في الاتصال"),s.sucsses=!1,c.value=!1)}function q(l,e,b,V){v.value=!1,i.value.city=l,i.value.addressLine=e,i.value.latitude=b,i.value.longitude=V}const i=d({city:null,addressLine:null,description:null,isDefault:!1,latitude:14.54,longitude:49.13,userID:null}),N=P(()=>{const l=i.value;return!l.city||!l.addressLine||!l.description||!l.latitude||!l.longitude}),h=d(!1);async function O(){h.value=!0;try{let l=null;S.value?l=await s.PutUpdateLocation(i.value):l=await s.PostCreateLocation(i.value),s.sucsses?S.value?(x("تم تعديل العنوان بنجاح"),s.GetLocationPaged()):(x("تم إضافة العنوان بنجاح"),s.locationData.unshift(l)):w("مشكلة في الاتصال"),s.sucsses=!1,p.value=!1}catch(l){console.log(l)}finally{h.value=!1}}const S=d(!1),R=d(null);async function z(l,e){let b=await s.GetLocationById(l);b&&(i.value={...b},p.value=!0,S.value=!0,R.value=e)}H(p,l=>{l===!1&&(S.value=!1,R.value=null)});const g=d(!1),D=d(null),$=d(null);function J(l,e){D.value=l,$.value=e,g.value=!0}function K(l,e){D.value=l,$.value=e,c.value=!0}async function Q(){await s.SetDefaultLocation(D.value,i.value.userID)?(x("تم تعديل العنوان الافتراضي بنجاح"),s.locationData.find(e=>e.isDefault===!0).isDefault=!1,s.locationData[$.value].isDefault=!0,s.DefaultLocation=s.locationData[$.value]):w(" حصل خطاء لا يمكنك تعديل العنوان الافتراضي"),g.value=!1}return H(()=>g.value||c.value,l=>{l===!1&&(D.value=null,$.value=null)}),(l,e)=>{const b=oe,V=ie,U=de,W=re,X=ue,Y=je,Z=xe,ee=Ge,te=ge,se=ye,j=we,le=ae;return m(),_(M,null,[a(b,{id:"up"}),t("div",Ne,[e[28]||(e[28]=t("nav",{"data-aos":"fade-up",class:"pr-6 pl-6 mt-4 mb-3 align-items-center flex gap-2"},[t("span",null,"الرئيسية"),B(),t("span",null,[t("i",{class:"pi pi-angle-left"})]),t("span",null,"الاعدادات"),B(),t("span",null,[t("i",{class:"pi pi-angle-left"})]),t("span",{class:"font-bold"},"العناوين")],-1)),t("div",Re,[t("div",Fe,[e[15]||(e[15]=t("h1",{class:"title"},"العناوين",-1)),t("button",{class:"add-product-btn px-3",onClick:e[0]||(e[0]=o=>p.value=!0)},e[14]||(e[14]=[B(" اضافة عنوان جديد "),t("i",{class:"pi pi-plus"},null,-1)]))]),a(te,{value:n(u),paginator:!0,rows:5},ve({header:f(()=>[t("div",Pe,[t("div",He,[a(W,{class:"w-full"},{default:f(()=>[a(V,{class:"pi pi-search"}),a(U,{class:"search",modelValue:n(L),"onUpdate:modelValue":e[1]||(e[1]=o=>k(L)?L.value=o:null),placeholder:"البحث على عنوان"},null,8,["modelValue"])]),_:1})]),t("div",Te,[a(X,{"input-id":"check",modelValue:n(r),"onUpdate:modelValue":e[2]||(e[2]=o=>k(r)?r.value=o:null),binary:!0},null,8,["modelValue"]),e[16]||(e[16]=t("label",{for:"check",class:"cursor-pointer"},"عرض العنوان الافتراضي",-1))])])]),list:f(o=>[(m(!0),_(M,null,T(o.items,(E,ne)=>(m(),_e(Y,{class:"mt-2",key:E.id,onDeleteAddress:K,Address:E,id:E.id,index:ne,onEditAddress:z,onClickDefault:J},null,8,["Address","id","index"]))),128))]),_:2},[n(s).loading?{name:"empty",fn:f(()=>[t("div",qe,[(m(),_(M,null,T(3,o=>a(Z,{class:"col-3",type:"card"})),64))])]),key:"0"}:{name:"empty",fn:f(()=>[t("div",null,[e[17]||(e[17]=t("br",null,null,-1)),a(ee)])]),key:"1"}]),1032,["value"])]),a(j,{visible:n(v),"onUpdate:visible":e[3]||(e[3]=o=>k(v)?v.value=o:null),header:"اختر عنوانك على الخريطة",modal:!0,class:"p-fluid",style:{width:"1000px",textAlign:"center",borderRadius:"24px"}},{default:f(()=>[t("div",null,[a(se,{onConfirm:q})])]),_:1},8,["visible"]),a(j,{visible:n(p),"onUpdate:visible":e[9]||(e[9]=o=>k(p)?p.value=o:null),modal:"",header:"عنوان جديد",style:{width:"45rem"}},{default:f(()=>[t("div",Oe,[t("div",null,[t("div",ze,[t("div",Je,[e[18]||(e[18]=t("label",{for:"city"},"المدينة *",-1)),a(U,{id:"city",modelValue:n(i).city,"onUpdate:modelValue":e[4]||(e[4]=o=>n(i).city=o),placeholder:"ادخل المدينة ",class:"w-full"},null,8,["modelValue"])]),t("div",Ke,[e[19]||(e[19]=t("label",{for:"addressLine"},"الشارع *",-1)),a(U,{id:"addressLine",modelValue:n(i).addressLine,"onUpdate:modelValue":e[5]||(e[5]=o=>n(i).addressLine=o),placeholder:"ادخل اسم الشارع ورقمه"},null,8,["modelValue"])])]),t("div",Qe,[t("div",We,[e[20]||(e[20]=t("label",{for:"description"},"تفاصيل العنوان *",-1)),a(U,{id:"description",modelValue:n(i).description,"onUpdate:modelValue":e[6]||(e[6]=o=>n(i).description=o),placeholder:"ادخل تفاصيل العنوان"},null,8,["modelValue"])])]),t("div",Xe,[t("button",{class:be(n(N)?"disabled add-product-btn w-50 ":"add-product-btn w-50 "),onClick:e[7]||(e[7]=o=>n(N)?null:O())},[n(h)?(m(),_("span",Ye)):(m(),_(M,{key:0},[e[21]||(e[21]=t("span",{class:"text-sm"},"حفظ العنوان",-1)),e[22]||(e[22]=t("i",{class:"pi pi-arrow-circle-left"},null,-1))],64))],2),a(n(y),{onClick:e[8]||(e[8]=o=>v.value=!n(v)),class:"w-50 cancel-btn flex justify-content-center align-items-center gap-2"},{default:f(()=>e[23]||(e[23]=[t("span",{class:"text-orange-500 text-sm"}," تحديد العنوان من الخريطة ",-1),t("i",{class:"pi pi-map-marker text-orange-500"},null,-1)])),_:1,__:[23]})])])])]),_:1},8,["visible"]),a(j,{visible:n(c),"onUpdate:visible":e[11]||(e[11]=o=>k(c)?c.value=o:null),modal:"",closable:!1,style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:f(()=>[e[24]||(e[24]=t("h1",{class:"font-bold text-xl text-enter"},"حذف عنوان",-1)),e[25]||(e[25]=t("p",{class:"p-text-secondary",style:{"line-height":"1.5"}},"عند بدء طلب جديد من متجر آخر ، سيتم إزالة عنوان سلة تسوقك من متجر .",-1)),t("div",Ze,[a(n(y),{class:"delete-btn w-50",type:"button",label:"تأكيد الحذف",onClick:I,loading:n(s).loadingDelete},null,8,["loading"]),a(n(y),{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:e[10]||(e[10]=o=>c.value=!1)})])]),_:1,__:[24,25]},8,["visible"]),a(j,{visible:n(g),"onUpdate:visible":e[13]||(e[13]=o=>k(g)?g.value=o:null),modal:"",closable:!1,style:{width:"25rem",textAlign:"center",borderRadius:"24px"}},{default:f(()=>[e[26]||(e[26]=t("h1",{class:"font-bold text-xl text-enter"},"اختيار العنوان الافتراضي",-1)),e[27]||(e[27]=t("p",{class:"p-text-secondary",style:{"line-height":"1.5"}}," هل تريد بأفعل اختيار هاذ العنوان الافتراضي لك للطلب من المتاجر ؟ ",-1)),t("div",et,[a(n(y),{class:"add-btn w-50",style:{"border-radius":"12px"},type:"button",label:"نعم",onClick:Q,loading:n(s).loadingUpdate},null,8,["loading"]),a(n(y),{class:"cancel-btn w-50",type:"button",label:"إلغاء",onClick:e[12]||(e[12]=o=>g.value=!1)})])]),_:1,__:[26,27]},8,["visible"])]),a(le)],64)}}},Gt=G(tt,[["__scopeId","data-v-b4cf6c38"]]);export{Gt as default};
