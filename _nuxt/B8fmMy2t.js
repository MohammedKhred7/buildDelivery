import V from"./B7CeY-K3.js";import g from"./DdIfpsv4.js";import{s as u}from"./BM0B1VWy.js";import w from"./B20Gnalr.js";import k from"./CRpUQ-uZ.js";import{u as $}from"./Dqm5Bq0c.js";import{u as A}from"./DFQYjDRN.js";import{_ as N,s as U,r,j,k as B,K as E,c as G,a as i,b as t,d as R,u as e,w as y,q as C,o as M,t as q}from"./B6hyc-DT.js";import"./T1T5Ju6G.js";import"./1zb_3qSe.js";import"./BbmZGI02.js";import"./CzBejqOB.js";import"./Cf5RlIOy.js";import"./CVDCiKEv.js";import"./7ctGooj3.js";import"./MIF2o3ln.js";import"./D7RFaxuH.js";import"./DUh_2QCG.js";import"./DZXiCOVn.js";import"./CKCaaUPU.js";import"./BAAtFucp.js";import"./2tt-UgiK.js";import"./C9s4F1DK.js";import"./Cdl_Oyys.js";import"./CYiglIje.js";import"./XqhXtBFw.js";import"./98G7WEDS.js";const H={class:"py-6 pl-6 pr-6"},K={class:"p-fluid p-0"},O={class:"flex flex-column gap-2 mb-4"},P={class:"flex flex-column gap-2 mb-4 w-full"},z={class:"flex justify-content-center gap-2"},F={class:"flex justify-content-center gap-2 mt-4"},J={__name:"categories2",setup(L){A({title:"إدارة التصنيفات"});const{errorMessage:b,success:x}=U(),a=$();r(null),j(),B(async()=>{a.GetAllStoreTypes()});const d=r(!1),f=r(null),v=r(null),p=r(!1),n=r({id:null,name:"",description:""}),c=r(null);function S(){n.value={id:null,name:"",description:""},c.value=null,p.value=!0}async function T(o){n.value={...o};let l=await a.allStoreTypes.findIndex(s=>s.id===n.value.id);c.value=l,p.value=!0}const m=r(!1);async function _(){m.value=!0;try{c.value===null?(await a.AddStorType(n.value),a.sucsses?(x("تم إضافة التصنيف  بنجاح"),a.GetAllStoreTypes()):b("مشكلة في الاتصال")):(await a.updateCategory(n.value),a.sucsses?(x("تم تعديل التصنيف  بنجاح"),a.allStoreTypes.splice(c.value,1,{...n.value})):b("مشكلة في الاتصال")),a.sucsses=!1,p.value=!1}catch(o){console.log(o)}finally{m.value=!1}}async function h(o){v.value=o;let l=await a.allStoreTypes.findIndex(s=>s.id===o);f.value=l,d.value=!0}async function D(){m.value=!0;try{f.value!==null&&(await a.DeleteStoreType(v.value),a.sucsses?(x("تم حذف التصنيف  بنجاح"),a.allStoreTypes.splice(f.value,1)):b("مشكلة في الاتصال")),a.sucsses=!1,d.value=!1}catch(o){console.log(o)}finally{m.value=!1}}return E(d,o=>{o===!1&&(v.value=null,f.value=null)}),(o,l)=>(M(),G("div",H,[l[9]||(l[9]=i("div",{class:"main-title mb-4"},[i("h1",{class:"pb-3 pr-0"},[R(" إدارة التصنيفات "),i("i",{class:"pi pi-palette pr-3"})])],-1)),i("div",null,[t(e(u),{label:"إضافة تصنيف",class:"mb-3",severity:"success",onClick:S})]),t(e(V),{value:e(a).allStoreTypes,rows:5,rowsPerPageOptions:[5,10,20,50],paginator:!0,class:"p-datatable-gridlines"},{default:y(()=>[t(e(g),{style:{"text-align":"start"},field:"id",header:"ID",sortable:""}),t(e(g),{style:{"text-align":"start"},field:"name",header:"اسم التصنيف",sortable:""}),t(e(g),{style:{"text-align":"start"},field:"description",header:" الوصف",sortable:""}),t(e(g),{style:{"text-align":"start"},header:"إجراء"},{body:y(s=>[t(e(u),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"gap-2 ml-2",onClick:I=>T(s.data)},null,8,["onClick"]),t(e(u),{label:"حذف",icon:"pi pi-trash",severity:"danger",class:"gap-2",onClick:I=>h(s.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),t(e(w),{visible:e(p),"onUpdate:visible":l[3]||(l[3]=s=>C(p)?p.value=s:null),header:e(c)===null?"إضافة تصنيف":"تعديل تصنيف",modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:y(()=>[i("div",K,[i("div",O,[l[6]||(l[6]=i("label",{for:"categoryName pl-0 pr-0"},"اسم التصنيف",-1)),t(e(k),{id:"categoryName",class:"w-full",placeholder:"ادخل اسم التصنيف ..",modelValue:e(n).name,"onUpdate:modelValue":l[0]||(l[0]=s=>e(n).name=s)},null,8,["modelValue"])]),i("div",P,[l[7]||(l[7]=i("label",{for:"description pl-0 pr-0"}," الوصف",-1)),t(e(k),{id:"description",class:"w-full",placeholder:"ادخل وصف التصنيف ..",modelValue:e(n).description,"onUpdate:modelValue":l[1]||(l[1]=s=>e(n).description=s)},null,8,["modelValue"])]),i("div",z,[t(e(u),{label:e(c)===null?"حفظ":"تحديث",icon:"pi pi-check pl-2",class:"w-50",severity:"success",onClick:_,loading:e(m)},null,8,["label","loading"]),t(e(u),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:l[2]||(l[2]=s=>p.value=!1)})])])]),_:1},8,["visible","header"]),t(e(w),{visible:e(d),"onUpdate:visible":l[5]||(l[5]=s=>C(d)?d.value=s:null),modal:"",closable:!1,style:{width:"auto",textAlign:"center",borderRadius:"24px"}},{default:y(()=>[l[8]||(l[8]=i("h1",{class:"font-bold text-xl mb-2"},"حذف تصنيف",-1)),i("p",null,"هل أنت متأكد أنك تريد حذف تصنيف بالمعرف "+q(e(v))+"؟",1),i("div",F,[t(e(u),{label:"تأكيد الحذف",icon:"pi pi-check",severity:"danger",class:"w-100",onClick:D,loading:e(m)},null,8,["loading"]),t(e(u),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:l[4]||(l[4]=s=>d.value=!1)})])]),_:1,__:[8]},8,["visible"])]))}},Ce=N(J,[["__scopeId","data-v-7f81485c"]]);export{Ce as default};
