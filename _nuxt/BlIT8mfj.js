import E from"./Ck2eBa8Y.js";import{_ as F,s as G,r as o,j as L,O as M,k as O,K as T,c as p,a as t,b as n,d as q,w as u,u as e,q as H,o as m,i as K,g as y,n as J,v as Q,I as W}from"./B6hyc-DT.js";import X from"./B7CeY-K3.js";import j from"./DdIfpsv4.js";import{s as _}from"./BM0B1VWy.js";import Y from"./B20Gnalr.js";import"./CRpUQ-uZ.js";import{u as Z}from"./Dqm5Bq0c.js";import{u as P}from"./DFQYjDRN.js";import"./CYiglIje.js";import"./J7KmeKrO.js";import"./BGxNCpXI.js";import"./98G7WEDS.js";import"./T1T5Ju6G.js";import"./1zb_3qSe.js";import"./BbmZGI02.js";import"./CzBejqOB.js";import"./Cf5RlIOy.js";import"./CVDCiKEv.js";import"./7ctGooj3.js";import"./MIF2o3ln.js";import"./D7RFaxuH.js";import"./DUh_2QCG.js";import"./DZXiCOVn.js";import"./CKCaaUPU.js";import"./BAAtFucp.js";import"./2tt-UgiK.js";import"./C9s4F1DK.js";import"./Cdl_Oyys.js";import"./XqhXtBFw.js";const ee={class:"py-6 pl-6 pr-6"},le={class:"icon-category"},se=["src"],ae={class:"p-fluid p-0"},te={class:"mb-4"},ie={key:0,class:"flex justify-content-center"},oe=["src"],ne={key:1,class:"relative text-white mr-4",style:{top:"50px",left:"9px"}},re={class:"flex justify-content-center gap-2"},ce={__name:"slider",setup(de){P({title:"إدارة شرائح الصفحة الرئيسية"});const{errorMessage:h,success:$}=G(),i=Z(),b=o(null),B=L(),{file:r,urlImage:w}=M(B);O(async()=>{i.GetAllSlides()});const R=o(!1),D=o(null),f=o(null),d=o(!1),c=o({id:1,images:[]}),x=o(null);async function N(a){for(let l=0;l<i.allSlides.images.length;l++)i.allSlides.images[l]===a&&(x.value=l);c.value=i==null?void 0:i.allSlides.images,r.value=null,d.value=!0}function U(a){r.value=a.files[0]}function V(){r.value=null}function z(){b.value.choose()}const v=o(!1);async function A(){v.value=!0;try{if(f.value===null){r.value&&(c.value[x.value]=42);const a={id:1,images:[...c.value]};console.log("Sending payload:",a),await i.updateImageSlider(a),i.sucsses?($("تم تعديل الصورة بنجاح"),await i.GetAllSlides()):h("مشكلة في الاتصال")}d.value=!1}catch(a){console.log(a),h("حدث خطأ غير متوقع")}finally{v.value=!1}}return T(R,a=>{a===!1&&(f.value=null,D.value=null)}),(a,l)=>{var I;const S=E;return m(),p("div",ee,[l[3]||(l[3]=t("div",{class:"main-title mb-4"},[t("h1",{class:"pb-3 pr-0"},[q(" إدارة شرائح الصفحة الرئيسية "),t("i",{class:"pi pi-image pr-3"})])],-1)),n(e(X),{value:(I=e(i))==null?void 0:I.allSlides.images,rows:5,rowsPerPageOptions:[5,10,20,50],paginator:!0,class:"p-datatable-gridlines"},{default:u(()=>[n(e(j),{field:"images",header:"الصورة",style:{"justify-content":"center",display:"flex"}},{body:u(s=>[t("div",le,[t("img",{src:e(w)+(s==null?void 0:s.data),alt:"icon",class:"w-full h-full",style:{"border-radius":"5px"}},null,8,se)])]),_:1}),n(e(j),{style:{"text-align":"start"},header:"إجراء"},{body:u(s=>[n(e(_),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"gap-2 ml-2",onClick:g=>N(s==null?void 0:s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),n(e(Y),{visible:e(d),"onUpdate:visible":l[1]||(l[1]=s=>H(d)?d.value=s:null),header:"تعديل صورة",modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:u(()=>{var s,g,k,C;return[t("div",ae,[t("div",te,[K(n(S,{ref_key:"uploader",ref:b,class:J(e(r)?"d-none":"justify-content-center "),name:"avatar",customUpload:"",accept:"image/*",maxFileSize:"1000000",auto:!1,multiple:!1,chooseLabel:"انقر لتحميل صورة",uploadLabel:"انقر لتحميل صورة",showUploadButton:!1,showCancelButton:!1,onSelect:U,onRemove:V},null,8,["class"]),[[Q,e(r)]]),e(r)?y("",!0):(m(),p("div",ie,[t("div",{class:"profileImage p-1",onClick:z},[(s=e(c))!=null&&s.id?(m(),p("img",{key:0,src:e(w)+((g=e(c))==null?void 0:g.id),alt:"انقر لتحميل صورة",style:{"border-radius":"50%",width:"100%",height:"100%","object-fit":"cover"}},null,8,oe)):y("",!0),(k=e(c))!=null&&k.id?y("",!0):(m(),p("span",ne,"انقر لتحميل صورة ")),t("span",{class:"iconCamera",style:W({top:(C=e(c))!=null&&C.id?"-44px":"50px"})},l[2]||(l[2]=[t("i",{class:"pi pi-camera"},null,-1)]),4)])]))]),t("div",re,[n(e(_),{label:e(f)?"تحديث":"حفظ",icon:"pi pi-check pl-2",class:"w-50",severity:"success",onClick:A,loading:e(v)},null,8,["label","loading"]),n(e(_),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:l[0]||(l[0]=pe=>d.value=!1)})])])]}),_:1},8,["visible"])])}}},Oe=F(ce,[["__scopeId","data-v-ec91b333"]]);export{Oe as default};
