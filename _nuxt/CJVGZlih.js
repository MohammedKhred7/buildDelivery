import q from"./BaBzIy89.js";import{_ as H,y as J,r as c,q as O,Q as P,e as Q,L as K,c as _,a as t,b as a,d as W,u as e,w as y,x as j,o as I,m as X,i as T,n as Y,v as Z,J as ee,t as le}from"./BKzAI-Wm.js";import se from"./CgE-xq-4.js";import g from"./CY7mWgWM.js";import{s as p}from"./q7OVjmMF.js";import A from"./CjvyA2IO.js";import N from"./BOlN8jLb.js";import{u as te}from"./CyXgzBTT.js";import{u as ae}from"./C4EaSLWD.js";import"./CAjwrcL4.js";import"./BpPbVGvO.js";import"./qUGvnqAa.js";import"./DP3FlFFF.js";import"./CilANJHZ.js";import"./BAucYZdM.js";import"./L3f-xkPK.js";import"./9o-Koa9O.js";import"./Cwh2tmgo.js";import"./C1Mp-rmU.js";import"./C0_8Y8II.js";import"./C1LJ4p9L.js";import"./CC4pnd9y.js";import"./BDA6GOlZ.js";import"./KkwLtKHe.js";import"./BvS0gpQO.js";import"./D0VkXlIJ.js";import"./43TDA2d_.js";import"./BgxuKbKG.js";import"./C4IZaNiG.js";import"./EesFF22n.js";const oe={class:"py-6 pl-6 pr-6"},ie={class:"icon-category"},ne=["src"],re={class:"p-fluid p-0"},ce={class:"flex flex-column gap-2 mb-4"},ue={class:"flex flex-column gap-2 mb-4 w-full"},de={class:"mb-4"},pe={key:0,class:"flex justify-content-center"},me=["src"],fe={key:1,class:"relative text-white mr-4",style:{top:"50px",left:"9px"}},ve={class:"flex justify-content-center gap-2"},ye={class:"flex justify-content-center gap-2 mt-4"},ge={__name:"categories2",setup(be){ae({title:"إدارة تصنيفات المتاجر"});const{errorMessage:C,success:S}=J(),i=te(),D=c(null),k=O(),{file:r,urlImage:V}=P(k);Q(async()=>{i.GetAllStoreTypes()});const u=c(!1),b=c(null),x=c(null),d=c(!1),o=c({id:null,name:"",description:"",iconId:null}),m=c(null);function R(){o.value={id:null,name:"",description:"",iconId:null},r.value=null,m.value=null,d.value=!0}async function B(s){o.value={...s};let l=await i.allStoreTypes.findIndex(v=>v.id===o.value.id);r.value=null,m.value=l,d.value=!0}function F(s){r.value=s.files[0]}function z(){r.value=null}function E(){D.value.choose()}const f=c(!1);async function G(){f.value=!0;try{if(m.value===null){if(r.value){const s=await k.upladFiles(r.value);s&&(o.value.iconId=s)}await i.AddStorType(o.value),i.sucsses?(S("تم إضافة التصنيف  بنجاح"),i.GetAllCategories()):C("مشكلة في الاتصال")}else{if(r.value){const s=await k.upladFiles(r.value);s&&(o.value.iconId=s)}await i.UpdateStoreType(o.value),i.sucsses?(S("تم تعديل التصنيف  بنجاح"),i.allStoreTypes.splice(m.value,1,{...o.value})):C("مشكلة في الاتصال")}i.sucsses=!1,d.value=!1}catch(s){console.log(s)}finally{f.value=!1}}async function L(s){x.value=s;let l=await i.allStoreTypes.findIndex(v=>v.id===s);b.value=l,u.value=!0}async function M(){f.value=!0;try{b.value!==null&&(await i.DeleteStoreType(x.value),i.sucsses?(S("تم حذف التصنيف  بنجاح"),i.allStoreTypes.splice(b.value,1)):C("مشكلة في الاتصال")),i.sucsses=!1,u.value=!1}catch(s){console.log(s)}finally{f.value=!1}}return K(u,s=>{s===!1&&(x.value=null,b.value=null)}),(s,l)=>{const v=q;return I(),_("div",oe,[l[10]||(l[10]=t("div",{class:"main-title mb-4"},[t("h1",{class:"pb-3 pr-0"},[W(" إدارة تصنيفات المتاجر "),t("i",{class:"pi pi-palette pr-3"})])],-1)),t("div",null,[a(e(p),{label:"إضافة تصنيف",class:"mb-3",severity:"success",onClick:R})]),a(e(se),{value:e(i).allStoreTypes,rows:5,rowsPerPageOptions:[5,10,20,50],paginator:!0,class:"p-datatable-gridlines"},{default:y(()=>[a(e(g),{style:{"text-align":"start"},field:"id",header:"ID",sortable:""}),a(e(g),{field:"iconId",header:"الصورة",style:{"justify-content":"center",display:"flex"}},{body:y(n=>[t("div",ie,[t("img",{src:e(V)+n.data.iconId,alt:"icon",class:"w-full h-full",style:{"border-radius":"50px"}},null,8,ne)])]),_:1}),a(e(g),{style:{"text-align":"start"},field:"name",header:"اسم التصنيف",sortable:""}),a(e(g),{style:{"text-align":"start"},field:"description",header:" الوصف",sortable:""}),a(e(g),{style:{"text-align":"start"},header:"إجراء"},{body:y(n=>[a(e(p),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"gap-2 ml-2",onClick:w=>B(n.data)},null,8,["onClick"]),a(e(p),{label:"حذف",icon:"pi pi-trash",severity:"danger",class:"gap-2",onClick:w=>L(n.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),a(e(A),{visible:e(d),"onUpdate:visible":l[3]||(l[3]=n=>j(d)?d.value=n:null),header:e(m)===null?"إضافة تصنيف":"تعديل تصنيف",modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:y(()=>{var n,w,$,U;return[t("div",re,[t("div",ce,[l[6]||(l[6]=t("label",{for:"categoryName pl-0 pr-0"},"اسم التصنيف",-1)),a(e(N),{id:"categoryName",class:"w-full",placeholder:"ادخل اسم التصنيف ..",modelValue:e(o).name,"onUpdate:modelValue":l[0]||(l[0]=h=>e(o).name=h)},null,8,["modelValue"])]),t("div",ue,[l[7]||(l[7]=t("label",{for:"description pl-0 pr-0"}," الوصف",-1)),a(e(N),{id:"description",class:"w-full",placeholder:"ادخل الوصف التصنيف ..",modelValue:e(o).description,"onUpdate:modelValue":l[1]||(l[1]=h=>e(o).description=h)},null,8,["modelValue"])]),t("div",de,[X(a(v,{ref_key:"uploader",ref:D,class:Y(e(r)?"d-none":"justify-content-center "),name:"avatar",customUpload:"",accept:"image/*",maxFileSize:"1000000",auto:!1,multiple:!1,chooseLabel:"انقر لتحميل صورة",uploadLabel:"انقر لتحميل صورة",showUploadButton:!1,showCancelButton:!1,onSelect:F,onRemove:z},null,8,["class"]),[[Z,e(r)]]),e(r)?T("",!0):(I(),_("div",pe,[t("div",{class:"profileImage p-1",onClick:E},[(n=e(o))!=null&&n.iconId?(I(),_("img",{key:0,src:e(V)+((w=e(o))==null?void 0:w.iconId),alt:"انقر لتحميل صورة",style:{"border-radius":"50%",width:"100%",height:"100%","object-fit":"cover"}},null,8,me)):T("",!0),($=e(o))!=null&&$.iconId?T("",!0):(I(),_("span",fe,"انقر لتحميل صورة ")),t("span",{class:"iconCamera",style:ee({top:(U=e(o))!=null&&U.iconId?"-44px":"50px"})},l[8]||(l[8]=[t("i",{class:"pi pi-camera"},null,-1)]),4)])]))]),t("div",ve,[a(e(p),{label:e(m)===null?"حفظ":"تحديث",icon:"pi pi-check pl-2",class:"w-50",severity:"success",onClick:G,loading:e(f)},null,8,["label","loading"]),a(e(p),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:l[2]||(l[2]=h=>d.value=!1)})])])]}),_:1},8,["visible","header"]),a(e(A),{visible:e(u),"onUpdate:visible":l[5]||(l[5]=n=>j(u)?u.value=n:null),modal:"",closable:!1,style:{width:"auto",textAlign:"center",borderRadius:"24px"}},{default:y(()=>[l[9]||(l[9]=t("h1",{class:"font-bold text-xl mb-2"},"حذف تصنيف",-1)),t("p",null,"هل أنت متأكد أنك تريد حذف تصنيف بالمعرف "+le(e(x))+"؟",1),t("div",ye,[a(e(p),{label:"تأكيد الحذف",icon:"pi pi-check",severity:"danger",class:"w-100",onClick:M,loading:e(f)},null,8,["loading"]),a(e(p),{label:"إلغاء",icon:"pi pi-times pl-2",class:"cancel-btn w-50",onClick:l[4]||(l[4]=n=>u.value=!1)})])]),_:1,__:[9]},8,["visible"])])}}},Ke=H(ge,[["__scopeId","data-v-7a5e8271"]]);export{Ke as default};
