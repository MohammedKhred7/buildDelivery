import _ from"./Clscm4lu.js";import A from"./CJhDEi4m.js";import $ from"./TvbeSgkw.js";import m from"./CCPHyqBu.js";import{s as f}from"./DxDbTdgb.js";import V from"./B6lV0hW4.js";import{u as M}from"./VrH1AKeK.js";import{u as U}from"./CdDIJBrp.js";import{_ as h,s as S,e as E,r as u,K as N,c as R,a as t,b as l,d as B,w as y,u as i,o as K,t as T}from"./CqALIQq-.js";import"./BoAeHPyv.js";import"./D6h0L3f_.js";import"./DypqVsHU.js";import"./as8uRvHu.js";import"./ORw8rJV6.js";import"./Yjdc5QZq.js";import"./CWXrTWzF.js";import"./KSXwTFMH.js";import"./CD868BvL.js";import"./sCjGwsjs.js";import"./D6fLeLqj.js";import"./BJ6J5tbx.js";import"./CMLRC_bA.js";import"./Bwxp4xfH.js";import"./CJ75tTpB.js";import"./CGxUnyZs.js";import"./BD18K1CI.js";import"./CGAiw73Z.js";const j={class:"py-6 pr-6 pl-6"},G={class:"flex-column gap-2 mb-4"},H={class:"flex-column gap-2 mb-4"},L={class:"flex-column gap-2 mb-4"},Y={class:"flex justify-content-center gap-2"},q={class:"flex justify-content-center gap-2"},z={__name:"configuration",setup(F){M({title:"الإعدادات"});const s=U(),{errorMessage:v,success:x}=S();E(async()=>{s.GetAppConfiguration()});const C=u([{id:1,name:"YER"},{id:2,name:"SAR"},{id:3,name:"USD"}]);function w(n){const e=String.fromCharCode(n.keyCode);/[0-9.]/.test(e)||n.preventDefault()}const d=u(!1),r=u(null),b=u(null),c=u(!1),o=u({id:null,minimumPrice:null,pricePerMeter:null,currency:""});async function D(n){o.value={...n};let e=await s.configuration.findIndex(g=>g.id===o.value.id);r.value=e,c.value=!0}async function k(){p.value=!0;try{if(!o.value.minimumPrice){v("الرجى ادخال اقل سعر");return}if(!o.value.pricePerMeter){v("الرجى ادخال سعر المتر");return}await s.UpdateAppConfiguration(o.value),s.sucsses?(x("تم تعديل الإعدادات بنجاح"),s.configuration.splice(r.value,1,{...o.value})):v("مشكلة في الاتصال"),s.sucsses=!1,c.value=!1}catch(n){console.log(n)}finally{p.value=!1}}const p=u(!1);async function I(){p.value=!0;try{r.value!==null&&(await s.DeleteArea(b.value),s.sucsses?(x("تم حذف منقطة بنجاح"),s.allArea.splice(r.value,1)):v("مشكلة في الاتصال")),s.sucsses=!1,d.value=!1}catch(n){console.log(n)}finally{p.value=!1}}return N(d,n=>{n===!1&&(b.value=null,r.value=null)},{immediate:!0}),(n,e)=>{const g=_,P=A;return K(),R("div",j,[e[11]||(e[11]=t("div",{class:"main-title mb-4"},[t("h1",{class:"pb-3 pr-0"},[B(" الإعدادات "),t("i",{class:"pi pi-cog pr-3"})])],-1)),e[12]||(e[12]=t("div",null,null,-1)),l(i(V),{visible:c.value,"onUpdate:visible":e[4]||(e[4]=a=>c.value=a),modal:"",closable:!1,style:{width:"30rem",borderRadius:"24px"}},{default:y(()=>[t("div",G,[e[7]||(e[7]=t("label",{for:"discountValue"}," سعر المتر *",-1)),l(g,{id:"discountValue",onKeypress:w,inputId:"integeronly",modelValue:o.value.pricePerMeter,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.pricePerMeter=a),placeholder:"ادخل سعر المتر"},null,8,["modelValue"])]),t("div",H,[e[8]||(e[8]=t("label",{for:"discountValue"}," اقل سعر *",-1)),l(g,{id:"discountValue",onKeypress:w,inputId:"integeronly",modelValue:o.value.minimumPrice,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.minimumPrice=a),placeholder:"ادخل اقل سعر"},null,8,["modelValue"])]),t("div",L,[e[9]||(e[9]=t("label",{for:"currency"}," العملة ",-1)),l(P,{id:"currency",showClear:!0,modelValue:o.value.currency,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.currency=a),options:C.value,optionValue:"name",optionLabel:"name",placeholder:"اختر العملة",class:"w-full"},null,8,["modelValue","options"])]),t("div",Y,[l(i(f),{class:"w-100",severity:r.value===null?"success":"warning",icon:"pi pi-check",label:r.value===null?"حفظ":"تحديث",loading:p.value,onClick:k},null,8,["severity","label","loading"]),l(i(f),{class:"cancel-btn w-50",label:"إلغاء",icon:"pi pi-times pl-2",onClick:e[3]||(e[3]=a=>(c.value=!1,r.value=null))})])]),_:1},8,["visible"]),l(i($),{value:i(s).configuration,rows:1,class:"p-datatable-gridlines"},{default:y(()=>[l(i(m),{style:{"text-align":"start"},field:"id",header:"ID"}),l(i(m),{style:{"text-align":"start"},field:"pricePerMeter",header:"سعـــر المتـــر"}),l(i(m),{style:{"text-align":"start"},field:"minimumPrice",header:"اقــل سعـــر"}),l(i(m),{style:{"text-align":"start","max-width":"100px"},field:"currency",header:"العمــلة"}),l(i(m),{style:{"text-align":"start"},class:"flex gap-2",header:"تعديــل"},{body:y(a=>[l(i(f),{label:"تعديل",icon:"pi pi-pencil",severity:"warning",class:"w-full gap-2 ml-2",onClick:J=>D(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),l(i(V),{visible:d.value,"onUpdate:visible":e[6]||(e[6]=a=>d.value=a),modal:"",closable:!1,style:{width:"auto",textAlign:"center",borderRadius:"24px"}},{default:y(()=>[e[10]||(e[10]=t("h1",{class:"font-bold text-xl text-enter"},"حذف رسوم التوصيل",-1)),t("p",null,"هل أنت متأكد أنك تريد حذف رسوم التوصيل بالمعرف "+T(b.value)+"؟",1),t("div",q,[l(i(f),{class:"w-100",severity:"danger",icon:"pi pi-check",label:"تأكيد الحذف",loading:p.value,onClick:I},null,8,["loading"]),l(i(f),{class:"cancel-btn w-50",label:"إلغاء",icon:"pi pi-times pl-2",onClick:e[5]||(e[5]=a=>d.value=!1)})])]),_:1,__:[10]},8,["visible"])])}}},Ce=h(z,[["__scopeId","data-v-a97b7419"]]);export{Ce as default};
